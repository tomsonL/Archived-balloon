var __define=this.__define||function(t,e,i,n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:n})},swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.TOP="top",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_HEIGHT="justifyUsingHeight",t}();t.RowAlign=e,lark.registerClass(e,"swan.RowAlign")}(swan||(swan={}));var swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.JustifyAlign=e,lark.registerClass(e,"swan.JustifyAlign")}(swan||(swan={}));var swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.LEFT="left",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_WIDTH="justifyUsingWidth",t}();t.ColumnAlign=e,lark.registerClass(e,"swan.ColumnAlign")}(swan||(swan={}));var swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.ROWS="rows",t.COLUMNS="columns",t}();t.TileOrientation=e,lark.registerClass(e,"swan.TileOrientation")}(swan||(swan={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},swan;!function(t){var e;!function(t){var e="swan.State",i="swan.AddItems",n="swan.SetProperty",a="swan.Binding.bindProperty",s=function(){function t(){this.indent=0}var e=t;return p=e.prototype,p.toCode=function(){return""},p.getIndent=function(t){void 0===t&&(t=this.indent);for(var e="",i=0;t>i;i++)e+="	";return e},t}();t.CodeBase=s,lark.registerClass(s,"swan.sys.CodeBase");var r=function(t){function e(){t.apply(this,arguments),this.className="",this.superClass="",this.innerClassBlock=[],this.variableBlock=[],this.functionBlock=[]}__extends(e,t);var i=e;return p=i.prototype,p.addInnerClass=function(t){-1==this.innerClassBlock.indexOf(t)&&this.innerClassBlock.push(t)},p.addVariable=function(t){-1==this.variableBlock.indexOf(t)&&this.variableBlock.push(t)},p.getVariableByName=function(t){for(var e=this.variableBlock,i=e.length,n=0;i>n;n++){var a=e[n];if(a.name==t)return a}return null},p.addFunction=function(t){-1==this.functionBlock.indexOf(t)&&this.functionBlock.push(t)},p.getFuncByName=function(t){for(var e=this.functionBlock,i=e.length,n=0;i>n;n++){var a=e[n];if(a.name==t)return a}return null},p.toCode=function(){var t=this.indent,e=this.getIndent(t),i=this.getIndent(t+1),n=this.getIndent(t+2),a=e+"(function (";a+=this.superClass?"_super) {\n"+i+"__extends("+this.className+", _super);\n":") {\n";for(var s=this.innerClassBlock,r=s.length,o=0;r>o;o++){var h=s[o];h.indent=t+1,a+=i+"var "+h.className+" = "+h.toCode()+"\n\n"}a+=i+"function "+this.className+"() {\n",this.superClass&&(a+=n+"_super.call(this);\n");var l=this.variableBlock;for(r=l.length,o=0;r>o;o++){var u=l[o];u.defaultValue&&(a+=n+u.toCode()+"\n")}if(this.constructCode){var d=this.constructCode.toCode().split("\n");for(r=d.length,o=0;r>o;o++){var c=d[o];a+=n+c+"\n"}}a+=i+"}\n",a+=i+"var _proto = "+this.className+".prototype;\n\n";var p=this.functionBlock;for(r=p.length,o=0;r>o;o++){var v=p[o];v.indent=t+1,a+=v.toCode()+"\n"}return a+=i+"return "+this.className+";\n"+e,a+=this.superClass?"})("+this.superClass+");":"})();"},e}(s);t.EXClass=r,lark.registerClass(r,"swan.sys.EXClass");var o=function(t){function e(){t.apply(this,arguments),this.lines=[]}__extends(e,t);var i=e;return p=i.prototype,p.addVar=function(t,e){var i=e?" = "+e:"";this.addCodeLine("var "+t+i+";")},p.addAssignment=function(t,e,i){var n=i?"."+i:"";this.addCodeLine(t+n+" = "+e+";")},p.addReturn=function(t){this.addCodeLine("return "+t+";")},p.addEmptyLine=function(){this.addCodeLine("")},p.startIf=function(t){this.addCodeLine("if("+t+")"),this.startBlock()},p.startElse=function(){this.addCodeLine("else"),this.startBlock()},p.startElseIf=function(t){this.addCodeLine("else if("+t+")"),this.startBlock()},p.startBlock=function(){this.addCodeLine("{"),this.indent++},p.endBlock=function(){this.indent--,this.addCodeLine("}")},p.doFunction=function(t,e){var i=e.join(",");this.addCodeLine(t+"("+i+")")},p.addCodeLine=function(t){this.lines.push(this.getIndent()+t)},p.addCodeLineAt=function(t,e){this.lines.splice(e,0,this.getIndent()+t)},p.containsCodeLine=function(t){return-1!=this.lines.indexOf(t)},p.concat=function(t){this.lines=this.lines.concat(t.lines)},p.toCode=function(){return this.lines.join("\n")},e}(s);t.EXCodeBlock=o,lark.registerClass(o,"swan.sys.EXCodeBlock");var h=function(t){function e(){t.apply(this,arguments),this.codeBlock=null,this.isGet=!1,this.name=""}__extends(e,t);var i=e;return p=i.prototype,p.toCode=function(){var t,e=this.getIndent(),i=this.getIndent(this.indent+1),n=e;if(this.isGet?(t=this.getIndent(this.indent+2),n+='Object.defineProperty(_proto, "skinParts", {\n',n+=i+"get: function () {\n"):(t=i,n+="_proto."+this.name+" = function () {\n"),this.codeBlock)for(var a=this.codeBlock.toCode().split("\n"),s=a.length,r=0;s>r;r++){var o=a[r];n+=t+o+"\n"}return n+=this.isGet?i+"},\n"+i+"enumerable: true,\n"+i+"configurable: true\n"+e+"});":e+"};"},e}(s);t.EXFunction=h,lark.registerClass(h,"swan.sys.EXFunction");var l=function(t){function e(e,i){t.call(this),this.indent=2,this.name=e,this.defaultValue=i}__extends(e,t);var i=e;return p=i.prototype,p.toCode=function(){return this.defaultValue?"this."+this.name+" = "+this.defaultValue+";":""},e}(s);t.EXVariable=l,lark.registerClass(l,"swan.sys.EXVariable");var u=function(t){function i(e,i){t.call(this),this.name="",this.stateGroups=[],this.addItems=[],this.setProperty=[],this.name=e,i&&(this.stateGroups=i)}__extends(i,t);var n=i;return p=n.prototype,p.addOverride=function(t){t instanceof d?this.addItems.push(t):this.setProperty.push(t)},p.toCode=function(){for(var t=this.getIndent(1),i="new "+e+' ("'+this.name+'",\n'+t+"[\n",n=0,a=!0,s=this.addItems.concat(this.setProperty);n<s.length;){a?a=!1:i+=",\n";for(var r=s[n],o=r.toCode().split("\n"),h=o.length,l=0;h>l;l++){var u=o[l];o[l]=t+t+u}i+=o.join("\n"),n++}return i+="\n"+t+"])"},i}(s);t.EXState=u,lark.registerClass(u,"swan.sys.EXState");var d=function(t){function e(e,i,n,a){t.call(this),this.target=e,this.property=i,this.position=n,this.relativeTo=a}__extends(e,t);var n=e;return p=n.prototype,p.toCode=function(){var t="new "+i+'("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")';return t},e}(s);t.EXAddItems=d,lark.registerClass(d,"swan.sys.EXAddItems");var c=function(t){function e(e,i,n){t.call(this),this.target=e,this.name=i,this.value=n}__extends(e,t);var i=e;return p=i.prototype,p.toCode=function(){return"new "+n+'("'+this.target+'","'+this.name+'",'+this.value+")"},e}(s);t.EXSetProperty=c,lark.registerClass(c,"swan.sys.EXSetProperty");var v=function(t){function e(e,i,n){t.call(this),this.target=e,this.property=i,this.expression=n}__extends(e,t);var i=e;return p=i.prototype,p.toCode=function(){var t=this.expression.split(".").join('","');return a+'(this, ["'+t+'"], this.'+this.target+',"'+this.property+'");'},e}(s);t.EXBinding=v,lark.registerClass(v,"swan.sys.EXBinding")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.LTR="ltr",t.RTL="rtl",t.TTB="ttb",t.BTT="btt",t}();t.Direction=e,lark.registerClass(e,"swan.Direction")}(swan||(swan={}));var swan;!function(t){var e;!function(t){function e(t){return-.5*(Math.cos(Math.PI*t)-1)}var i=function(){function t(t,i){this.easerFunction=e,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=t,this.thisObject=i}var i=t;return p=i.prototype,p.play=function(){this.stop(),this.start()},p.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=lark.getTimer(),this.doInterval(this.startTime),lark.startTick(this.doInterval,this)},p.stop=function(){this.isPlaying=!1,this.startTime=0,lark.stopTick(this.doInterval,this)},p.doInterval=function(t){var e=t-this.startTime;this.isPlaying||(this.isPlaying=!0);var i=this.duration,n=0==i?1:Math.min(e,i)/i;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var a=e>=i;return a&&this.stop(),a&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},t}();t.Animation=i,lark.registerClass(i,"swan.sys.Animation")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.ADD="add",t.REFRESH="refresh",t.REMOVE="remove",t.REPLACE="replace",t.RESET="reset",t.UPDATE="update",t}();t.CollectionEventKind=e,lark.registerClass(e,"swan.CollectionEventKind")}(swan||(swan={}));var swan;!function(t){var e=function(){function t(t,e,i,n){this.target=t,this.propertyName=e,this.position=i,this.relativeTo=n}var e=t;return p=e.prototype,p.apply=function(t,e){var i,n=t[this.relativeTo],a=t[this.target],s=this.propertyName?t[this.propertyName]:e;if(a&&s){switch(this.position){case 0:i=0;break;case 1:i=-1;break;case 2:i=s.getChildIndex(n);break;case 3:i=s.getChildIndex(n)+1}-1==i&&(i=s.numChildren),s.addChildAt(a,i)}},p.remove=function(t,e){var i=this.propertyName?t[this.propertyName]:e,n=t[this.target];n&&i&&n.$parent===i&&i.removeChild(n)},t}();t.AddItems=e,lark.registerClass(e,"swan.AddItems",["swan.IOverride"])}(swan||(swan={}));var swan;!function(t){var e=function(){function t(t,e,i){this.target=t,this.name=e,this.value=i}var e=t;return p=e.prototype,p.apply=function(t){var e=this.target?t[this.target]:t;e&&(this.oldValue=e[this.name],this.setPropertyValue(e,this.name,this.value,this.oldValue))},p.remove=function(t){var e=this.target?t[this.target]:t;e&&(this.setPropertyValue(e,this.name,this.oldValue,this.oldValue),this.oldValue=null)},p.setPropertyValue=function(t,e,i,n){t[e]=void 0===i||null===i?i:"number"==typeof n?+i:"boolean"==typeof n?this.toBoolean(i):i},p.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},t}();t.SetProperty=e,lark.registerClass(e,"swan.SetProperty",["swan.IOverride"])}(swan||(swan={}));var swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.AUTO="auto",t.OFF="off",t.ON="on",t}();t.ScrollPolicy=e,lark.registerClass(e,"swan.ScrollPolicy")}(swan||(swan={}));var swan;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.CLIP="clip",t.REPEAT="repeat",t.SCALE="scale",t}();t.BitmapFillMode=e,lark.registerClass(e,"swan.BitmapFillMode")}(swan||(swan={}));var swan;!function(t){function e(t,i){var n=Object.getOwnPropertyDescriptor(t,i);if(n)return n;var a=Object.getPrototypeOf(t);return a?e(a,i):null}var i="__bindables__",n=0,a=function(){function a(t,e,i,n){this.isExecuting=!1,this.property=t,this.handler=e,this.next=n,this.thisObject=i}var s=a;return p=s.prototype,a.watch=function(t,e,i,n){if(e.length>0){var s=e.shift(),r=a.watch(null,e,i,n),o=new a(s,i,n,r);return o.reset(t),o}return null},a.checkBindable=function(a,s){var r=a[i];if(r&&-1!=r.indexOf(s))return!0;var o=e(a,s);if(o&&o.set&&o.get){var h=o.set;o.set=function(e){this[s]!=e&&(h.call(this,e),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,s))}}else{if(o&&(o.get||o.set))return!1;n++;var l="_"+n+s;a[l]=o?o.value:null,o={enumerable:!0,configurable:!0},o.get=function(){return this[l]},o.set=function(e){this[l]!=e&&(this[l]=e,t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,s))}}Object.defineProperty(a,s,o),t.registerBindable(a,s)},p.unwatch=function(){this.reset(null),this.handler=null,this.next&&(this.next.handler=null)},p.getValue=function(){return this.next?this.next.getValue():this.getHostPropertyValue()},p.setHandler=function(t,e){this.handler=t,this.thisObject=e,this.next&&this.next.setHandler(t,e)},p.reset=function(e){lark.is(this.host,"lark.IEventEmitter")&&this.host.removeListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this),this.host=e,lark.is(e,"lark.IEventEmitter")&&(a.checkBindable(e,this.property),e.on(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,!1,100)),this.next&&this.next.reset(this.getHostPropertyValue())},p.getHostPropertyValue=function(){return this.host?this.host[this.property]:null},p.wrapHandler=function(t){if(t.property==this.property&&!this.isExecuting)try{this.isExecuting=!0,this.next&&this.next.reset(this.getHostPropertyValue()),this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=!1}},a}();t.Watcher=a,lark.registerClass(a,"swan.Watcher")}(swan||(swan={}));var swan;!function(t){var e=[],i={},n={},a=function(){function t(){}var a=t;return p=a.prototype,p.getAsset=function(t,a,s){var r=i[t];if(r)return void r.push([a,s]);var o=e.pop();o||(o=new lark.ImageLoader),i[t]=[[a,s]],n[o.$hashCode]=t,o.on(lark.Event.COMPLETE,this.onLoadFinish,this),o.on(lark.Event.IO_ERROR,this.onLoadFinish,this),o.load(t)},p.onLoadFinish=function(t){var a=t.currentTarget;a.removeListener(lark.Event.COMPLETE,this.onLoadFinish,this),a.removeListener(lark.Event.IO_ERROR,this.onLoadFinish,this);var s;t.$type==lark.Event.COMPLETE&&(s=a.data,a.data=null),e.push(a);var r=n[a.$hashCode];delete n[a.$hashCode];var o=i[r];delete i[r];for(var h=o.length,l=0;h>l;l++){var u=o[l];u[0].call(u[1],s,r)}},t}();t.DefaultAssetAdapter=a,lark.registerClass(a,"swan.DefaultAssetAdapter",["swan.IAssetAdapter"])}(swan||(swan={}));var swan;!function(t){function e(t,e,i,n){var a=t.prototype;a.__meta__=a.__meta__||{},a.__meta__[e]=i,n&&(a.__defaultProperty__=e)}t.registerProperty=e}(swan||(swan={}));var swan;!function(t){var e;!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){var e=lark.getDefinitionByName(t);return e?e.prototype:null}function n(t){if(!t)return null;try{var e=new t}catch(i){return null}return e}t.NS_S="http://ns.egret.com/swan",t.NS_W="http://ns.egret.com/wing";var a=["Array","boolean","string","number"],s="swan.",r=0,o={},h=function(){function h(){}var l=h;return p=l.prototype,p.describe=function(t){function i(){}if(!t)return null;var s=Object.getPrototypeOf(t);if(!s)return null;var h;if(s.hasOwnProperty("__hashCode__")&&(h=o[s.__hashCode__]))return h;var l=Object.getPrototypeOf(s);if(!l)return null;var u=n(l.constructor),d=this.describe(u);d?(i.prototype=d,h=new i):h={};for(var c=Object.keys(s).concat(Object.keys(t)),p=c.length,v=t.__meta__,f=0;p>f;f++){var m=c[f];if("constructor"!=m&&"_"!=m.charAt(0)&&"$"!=m.charAt(0)){var g;if(v&&v[m])g=v[m];else if(e(t[m]))g="Array";else{if(g=typeof t[m],"function"==g)continue;-1==a.indexOf(g)&&(g="any")}h[m]=g}}return s.__hashCode__=r++,o[s.__hashCode__]=h,h},p.getClassNameById=function(e,n){if("Object"==e&&n==t.NS_S)return e;var r="";return-1!=a.indexOf(e)?e:(n==t.NS_W||(r=n&&n!=t.NS_S?n.substring(0,n.length-1)+e:s+e),i(r)||(r=""),r)},p.getDefaultPropById=function(t,e){var n,a=this.getClassNameById(t,e),s=i(a);return s&&(n=s.__defaultProperty__),n?n:""},p.getPropertyType=function(t,e){if("Object"==e)return"any";var a="",s=i(e);if(s){if(!s.hasOwnProperty("__hashCode__")){var r=lark.getDefinitionByName(e),h=n(r);if(!h)return a;this.describe(h)}var l=o[s.__hashCode__];l&&(a=l[t])}return a},h}();t.EXMLConfig=h,lark.registerClass(h,"swan.sys.EXMLConfig")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){function e(t,e){if(t.hasOwnProperty(i))t[i].push(e);else{var n=[e];t[i]&&(n=t[i].concat(n)),t[i]=n}}var i="__bindables__";t.registerBindable=e}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(e,i){t.call(this),this.delayList=[],this.skinMap={},this.initialized=!e,i&&i.registerImplementation("swan.Theme",this),this.load(e)}__extends(e,t);var i=e;return p=i.prototype,p.load=function(t){var e=new lark.HttpRequest;e.on(lark.Event.COMPLETE,this.onConfigLoaded,this),e.on(lark.Event.IO_ERROR,this.onConfigLoaded,this),e.open(t),e.send()},p.onConfigLoaded=function(t){var e=t.target;try{var i=JSON.parse(e.response)}catch(n){}if(i&&i.skins)for(var a=this.skinMap,s=i.skins,r=Object.keys(s),o=r.length,h=0;o>h;h++){var l=r[h];a[l]||this.mapSkin(l,s[l])}this.initialized=!0,this.handleDelayList()},p.handleDelayList=function(){for(var t=this.delayList,e=t.length,i=0;e>i;i++){var n=t[i];if(!n.$Component[5]){var a=this.getSkinName(n);a&&(n.$Component[1]=a,n.$parseSkinName())}}t.length=0},p.getSkinName=function(t){if(!this.initialized)return void(-1==this.delayList.indexOf(t)&&this.delayList.push(t));var e=this.skinMap,i=e[t.hostComponentKey];return i||(i=this.findSkinName(t)),i},p.findSkinName=function(t){if(!t)return"";var e=t.__class__;if(void 0===e)return"";var i=this.skinMap[e];return i||"swan.Component"==e?i:this.findSkinName(Object.getPrototypeOf(t))},p.mapSkin=function(t,e){this.skinMap[t]=e},e}(lark.EventEmitter);t.Theme=e,lark.registerClass(e,"swan.Theme")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(e,i,n,a,s,r,o,h){t.call(this,e,i,n),this.$setTo(a,s,r,o,h)}__extends(e,t);var i=e;return p=i.prototype,p.$setTo=function(t,e,i,n,a){this.kind=t,this.location=0|+e,this.oldLocation=0|+i,this.items=n||[],this.oldItems=a||[]},p.clean=function(){t.prototype.clean.call(this),this.items=this.oldItems=null},e.emitCollectionEvent=function(t,i,n,a,s,r,o){if(!t.hasListener(i))return!0;var h=lark.Event.create(e,i);h.$setTo(n,a,s,r,o);var l=t.emit(h);return lark.Event.release(h),l},e.COLLECTION_CHANGE="collectionChange",e}(lark.Event);t.CollectionEvent=e,lark.registerClass(e,"swan.CollectionEvent")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.item=null,this.itemRenderer=null,this.itemIndex=-1}__extends(e,t);var i=e;return p=i.prototype,p.clean=function(){t.prototype.clean.call(this),this.item=this.itemRenderer=null},e.emitItemTapEvent=function(t,i,n){if(!t.hasListener(i))return!0;var a=lark.Event.create(e,i);a.item=n.data,a.itemIndex=n.itemIndex,a.itemRenderer=n;var s=t.emit(a);return lark.Event.release(a),s},e.ITEM_TAP="itemTap",e}(lark.Event);t.ItemTapEvent=e,lark.registerClass(e,"swan.ItemTapEvent")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(e,i,n,a){t.call(this,e,i,n),this.property=a}__extends(e,t);var i=e;return p=i.prototype,e.emitPropertyEvent=function(t,i,n){if(!t.hasListener(i))return!0;var a=lark.Event.create(e,i);a.property=n;var s=t.emit(a);return lark.Event.release(a),s},e.PROPERTY_CHANGE="propertyChange",e}(lark.Event);t.PropertyEvent=e,lark.registerClass(e,"swan.PropertyEvent")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(t){e.call(this),this._source=t?t:[]}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"source",function(){return this._source},function(e){e||(e=[]),this._source=e,this.emitCoEvent(t.CollectionEventKind.RESET)}),p.refresh=function(){this.emitCoEvent(t.CollectionEventKind.REFRESH)},n(p,"length",function(){return this._source.length},void 0),p.addItem=function(e){this._source.push(e),this.emitCoEvent(t.CollectionEventKind.ADD,this._source.length-1,-1,[e])},p.addItemAt=function(e,i){0>i||i>this._source.length,this._source.splice(i,0,e),this.emitCoEvent(t.CollectionEventKind.ADD,i,-1,[e])},p.getItemAt=function(t){return this._source[t]},p.getItemIndex=function(t){for(var e=this._source.length,i=0;e>i;i++)if(this._source[i]===t)return i;return-1},p.itemUpdated=function(e){var i=this.getItemIndex(e);-1!=i&&this.emitCoEvent(t.CollectionEventKind.UPDATE,i,-1,[e])},p.removeAll=function(){var e=this._source.concat();this._source.length=0,this.emitCoEvent(t.CollectionEventKind.REMOVE,0,-1,e)},p.removeItemAt=function(e){if(!(0>e||e>=this._source.length)){var i=this._source.splice(e,1)[0];return this.emitCoEvent(t.CollectionEventKind.REMOVE,e,-1,[i]),i}},p.replaceItemAt=function(e,i){if(!(0>i||i>=this._source.length)){var n=this._source.splice(i,1,e)[0];return this.emitCoEvent(t.CollectionEventKind.REPLACE,i,-1,[e],[n]),n}},p.replaceAll=function(t){t||(t=[]);for(var e=t.length,i=this._source.length,n=e;i>n;n++)this.removeItemAt(e);for(n=0;e>n;n++)n>=i?this.addItemAt(t[n],n):this.replaceItemAt(t[n],n);this._source=t},p.emitCoEvent=function(e,i,n,a,s){t.CollectionEvent.emitCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,e,i,n,a,s)},i}(lark.EventEmitter);t.ArrayCollection=e,lark.registerClass(e,"swan.ArrayCollection",["swan.ICollection","lark.IEventEmitter"]),t.registerProperty(e,"source","Array",!0)}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(t,i){e.call(this),this.name=t,this.overrides=i}__extends(i,e);var n=i;return p=n.prototype,p.initialize=function(e,i){for(var n=this.overrides,a=n.length,s=0;a>s;s++){var r=n[s];if(r instanceof t.AddItems){var o=e[r.target];o&&o instanceof t.Image&&!o.$parent&&(i.addChild(o),i.removeChild(o))}}},i}(lark.LarkObject);t.State=e,lark.registerClass(e,"swan.State")}(swan||(swan={}));var swan;!function(t){var e;!function(t){var e=function(){function t(){}var e=__define,i=t;return p=i.prototype,e(p,"states",function(){return this.$stateValues.states},function(t){t||(t=[]);var e=this.$stateValues;e.states=t;for(var i={},n=t.length,a=0;n>a;a++){var s=t[a];i[s.name]=s}e.statesMap=i,e.parent&&this.commitCurrentState()}),e(p,"currentState",function(){return this.$stateValues.currentState},function(t){var e=this.$stateValues;e.explicitState=t,e.currentState=t,this.commitCurrentState()}),p.commitCurrentState=function(){var t=this.$stateValues;if(t.parent){var e=t.statesMap[t.currentState];if(!e){if(!(t.states.length>0))return;t.currentState=t.states[0].name}if(t.oldState!=t.currentState){var i=t.parent,n=t.statesMap[t.oldState];if(n)for(var a=n.overrides,s=a.length,r=0;s>r;r++)a[r].remove(this,i);if(t.oldState=t.currentState,n=t.statesMap[t.currentState])for(a=n.overrides,s=a.length,r=0;s>r;r++)a[r].apply(this,i)}}},p.hasState=function(t){return!!this.$stateValues.statesMap[t]},p.initializeStates=function(t){this.$stateValues.intialized=!0;for(var e=this.states,i=e.length,n=0;i>n;n++)e[n].initialize(this,t)},t}();t.StateClient=e,lark.registerClass(e,"swan.sys.StateClient");var i=function(){function t(){this.intialized=!1,this.statesMap={},this.states=[],this.oldState=null,this.explicitState=null,this.currentState=null,this.parent=null,this.stateIsDirty=!1}var e=t;return p=e.prototype,t}();t.StateValues=i,lark.registerClass(i,"swan.sys.StateValues")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){function e(t,i){var n=t.parent,a=i.parent;if(!n||!a)return 0;var s=t.$nestLevel,r=i.$nestLevel,o=0,h=0;return n==a&&(o=n.getChildIndex(t),h=a.getChildIndex(i)),s>r||o>h?1:r>s||h>o?-1:t==i?0:e(n,a)}var i=0,n=function(n){function a(){n.call(this),this.$name=null,this.radioButtons=[],this.$enabled=!0,this._selectedValue=null,this._selection=null,this.$name="_radioButtonGroup"+i++}__extends(a,n);var s=__define,r=a;return p=r.prototype,p.getRadioButtonAt=function(t){return this.radioButtons[t]},s(p,"enabled",function(){return this.$enabled},function(t){if(t=!!t,this.$enabled!==t){this.$enabled=t;for(var e=this.radioButtons,i=e.length,n=0;i>n;n++)e[n].invalidateState()}}),s(p,"numRadioButtons",function(){return this.radioButtons.length},void 0),s(p,"selectedValue",function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},function(e){if(this._selectedValue=e,null==e)return void this.$setSelection(null,!1);for(var i=this.numRadioButtons,n=0;i>n;n++){var a=this.radioButtons[n];if(a.value==e||a.label==e){this.changeSelection(n,!1),this._selectedValue=null,t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}}),s(p,"selection",function(){return this._selection},function(t){this._selection!=t&&this.$setSelection(t,!1)}),p.$addInstance=function(t){t.on(lark.Event.REMOVED,this.removedHandler,this);var i=this.radioButtons;i.push(t),i.sort(e);for(var n=i.length,a=0;n>a;a++)i[a].$indexNumber=a;this._selectedValue&&(this.selectedValue=this._selectedValue),1==t.selected&&(this.selection=t),t.$radioButtonGroup=this,t.invalidateState()},p.$removeInstance=function(t,e){if(t)for(var i=!1,n=this.radioButtons,a=n.length,s=0;a>s;s++){var r=n[s];i?r.$indexNumber=r.$indexNumber-1:r==t&&(e&&t.on(lark.Event.ADDED,this.addedHandler,this),t==this._selection&&(this._selection=null),t.$radioButtonGroup=null,t.invalidateState(),this.radioButtons.splice(s,1),i=!0,s--,a--)}},p.$setSelection=function(e,i){if(this._selection!=e){if(e){for(var n=this.numRadioButtons,a=0;n>a;a++)if(e==this.getRadioButtonAt(a)){this.changeSelection(a,i);break}}else this._selection&&(this._selection.selected=!1,this._selection=null,i&&this.emitWith(lark.Event.CHANGE));t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue")}},p.changeSelection=function(t,e){var i=this.getRadioButtonAt(t);i&&i!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=i,this._selection.selected=!0,e&&this.emitWith(lark.Event.CHANGE))},p.addedHandler=function(t){var e=t.target;e&&(e.removeListener(lark.Event.ADDED,this.addedHandler,this),this.$addInstance(e))},p.removedHandler=function(t){var e=t.target;e&&(e.removeListener(lark.Event.REMOVED,this.removedHandler,this),this.$removeInstance(e,!0))},a}(lark.EventEmitter);t.RadioButtonGroup=n,lark.registerClass(n,"swan.RadioButtonGroup"),t.registerBindable(n.prototype,"selectedValue")}(swan||(swan={}));var swan;!function(t){var e=function(){function e(){}var i=e;return p=i.prototype,e.bindProperty=function(e,i,n,a){var s=t.Watcher.watch(e,i,null,null);if(s){var r=function(t){n[a]=t};s.setHandler(r,null),r(s.getValue())}return s},e.bindHandler=function(e,i,n,a){var s=t.Watcher.watch(e,i,n,a);return s&&n.call(a,s.getValue()),s},e}();t.Binding=e,lark.registerClass(e,"swan.Binding")}(swan||(swan={}));var swan;!function(t){var e;!function(t){function e(t){var e=t-1;return e*e*e+1}var i=4,n=[1,1.33,1.66,2],a=2.33,s=.02,r=.998,o=.95,h=Math.log(r),l=function(){function l(i,n,a){this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.started=!0,this.updateFunction=i,this.endFunction=n,this.target=a,this.animation=new t.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=e}var u=l;return p=u.prototype,p.isPlaying=function(){return this.animation.isPlaying},p.stop=function(){this.animation.stop(),lark.stopTick(this.onTick,this),this.started=!1},p.isStarted=function(){return this.started},p.start=function(t,e){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=lark.getTimer(),this.previousPosition=this.currentPosition=t,this.offsetPoint=e+t,lark.startTick(this.onTick,this)},p.update=function(t,e){this.currentPosition=t,this.maxScrollPos=e;var i=this.offsetPoint-t;0>i&&(i*=.5),i>e&&(i=.5*(i+e)),this.currentScrollPos=i,this.updateFunction.call(this.target,i)},p.finish=function(t,e){lark.stopTick(this.onTick,this),this.started=!1;for(var i=this.velocity*a,l=this.previousVelocity,u=l.length,d=a,c=0;u>c;c++){var p=n[c];i+=l[0]*p,d+=p}var v=i/d,f=Math.abs(v),m=0,g=0;if(f>s)if(g=t+(v-s)/h,0>g||g>e)for(g=t;Math.abs(v)>s;)g-=v,v*=0>g||g>e?r*o:r,m++;else m=Math.log(s/f)/h;m>0?this.throwTo(g,m):this.finishScrolling()},p.onTick=function(t){var e=t-this.previousTime;if(e>0){var n=this.previousVelocity;n.push(this.velocity),n.length>i&&n.shift(),this.velocity=(this.currentPosition-this.previousPosition)/e,this.previousTime=t,this.previousPosition=this.currentPosition}return!0},p.finishScrolling=function(){var t=this.currentScrollPos,e=this.maxScrollPos,i=t;0>t&&(i=0),t>e&&(i=e),this.throwTo(i,300)},p.throwTo=function(t,e){void 0===e&&(e=500);var i=this.currentScrollPos;if(i==t)return void this.endFunction.call(this.target);var n=this.animation;n.duration=e,n.from=i,n.to=t,n.play()},p.onScrollingUpdate=function(t){this.currentScrollPos=t.currentValue,this.updateFunction.call(this.target,t.currentValue)},l}();t.TouchScroll=l,lark.registerClass(l,"swan.sys.TouchScroll")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(e,i,n){t.call(this,e,i,n)}__extends(e,t);var i=e;return p=i.prototype,e.emitUIEvent=function(t,i){if(!t.hasListener(i))return!0;var n=lark.Event.create(e,i),a=t.emit(n);return lark.Event.release(n),a},e.CREATION_COMPLETE="creationComplete",e.CHANGE_END="changeEnd",e.CHANGE_START="changeStart",e.CLOSING="closing",e.MOVE="move",e}(lark.Event);t.UIEvent=e,lark.registerClass(e,"swan.UIEvent")}(swan||(swan={}));var swan;!function(t){var e;!function(t){function e(t,e,i,n,s,r,o,h,l,u){var d;if(!isNaN(i)&&isNaN(n)){if(d=a(t,e,i,r,i,h,i,u))return d}else if(isNaN(i)&&!isNaN(n)&&(d=a(t,e,s,n,o,n,l,n)))return d;return d=a(t,e,s,r,o,h,l,u)}function i(t,e,i,a,s,r,o,h,l,u){var d;if(!isNaN(i)&&isNaN(a)){if(d=n(t,e,i,r,i,h,i,u))return d}else if(isNaN(i)&&!isNaN(a)&&(d=n(t,e,s,a,o,a,l,a)))return d;return d=n(t,e,s,r,o,h,l,u)}function n(t,e,i,n,a,r,h,l){var u=e.b,d=e.d;if(u>-1e-9&&1e-9>u&&(u=0),d>-1e-9&&1e-9>d&&(d=0),0==u&&0==d)return null;if(0==u&&0==d)return null;if(0==u)return lark.Point.create(i,t/Math.abs(d));if(0==d)return lark.Point.create(t/Math.abs(u),n);var c,p,v,f=u*d>=0?d:-d;if(0!=f&&i>0){var m=1/f;i=Math.max(a,Math.min(h,i)),p=i,v=(t-u*p)*m,v>=r&&l>=v&&u*p+f*v>=0&&(c=lark.Point.create(p,v)),v=(-t-u*p)*m,v>=r&&l>=v&&0>u*p+f*v&&(!c||o(c.x,c.y,e).width>o(p,v,e).width)&&(lark.Point.release(c),c=lark.Point.create(p,v))}if(0!=u&&n>0){var g=1/u;n=Math.max(r,Math.min(l,n)),v=n,p=(t-f*v)*g,p>=a&&h>=p&&u*p+f*v>=0&&(!c||o(c.x,c.y,e).width>o(p,v,e).width)&&(c=lark.Point.create(p,v)),p=(-t-f*v)*g,p>=a&&h>=p&&0>u*p+f*v&&(!c||o(c.x,c.y,e).width>o(p,v,e).width)&&(lark.Point.release(c),c=lark.Point.create(p,v))}if(c)return c;var y=e.a,C=e.c,$=y*C>=0?C:-C;return s(u,f,t,a,r,h,l,y,$)}function a(t,e,i,n,a,r,h,l){var u=e.a,d=e.c;if(u>-1e-9&&1e-9>u&&(u=0),d>-1e-9&&1e-9>d&&(d=0),0==u&&0==d)return null;if(0==u)return lark.Point.create(i,t/Math.abs(d));if(0==d)return lark.Point.create(t/Math.abs(u),n);var c,p,v,f=u*d>=0?d:-d;if(0!=f&&i>0){var m=1/f;i=Math.max(a,Math.min(h,i)),p=i,v=(t-u*p)*m,v>=r&&l>=v&&u*p+f*v>=0&&(c=lark.Point.create(p,v)),v=(-t-u*p)*m,v>=r&&l>=v&&0>u*p+f*v&&(!c||o(c.x,c.y,e).height>o(p,v,e).height)&&(lark.Point.release(c),c=lark.Point.create(p,v))}if(0!=u&&n>0){var g=1/u;n=Math.max(r,Math.min(l,n)),v=n,p=(t-f*v)*g,p>=a&&h>=p&&u*p+f*v>=0&&(!c||o(c.x,c.y,e).height>o(p,v,e).height)&&(lark.Point.release(c),c=lark.Point.create(p,v)),p=(-t-f*v)*g,p>=a&&h>=p&&0>u*p+f*v&&(!c||o(c.x,c.y,e).height>o(p,v,e).height)&&(lark.Point.release(c),c=lark.Point.create(p,v))}if(c)return c;var y=e.b,C=e.d,$=y*C>=0?C:-C;return s(u,f,t,a,r,h,l,y,$)}function s(t,e,i,n,a,s,r,o,h){if(0==t||0==e)return null;var l,u,d=(i-n*t)/e,c=(i-s*t)/e,p=Math.max(a,Math.min(d,c)),v=Math.min(r,Math.max(d,c)),f=o*e-t*h;return v>=p?(u=Math.abs(f)<1e-9?i/(t+e):o*i/f,u=Math.max(p,Math.min(u,v)),l=(i-e*u)/t,lark.Point.create(l,u)):(d=-(n*t+i)/e,c=-(s*t+i)/e,p=Math.max(a,Math.min(d,c)),v=Math.min(r,Math.max(d,c)),v>=p?(u=Math.abs(f)<1e-9?-i/(t+e):-o*i/f,u=Math.max(p,Math.min(u,v)),l=(-i-e*u)/t,lark.Point.create(l,u)):null)}function r(t,e,i,n,a,r,o){var l=i.a,u=i.b,d=i.c,c=i.d;if(l>-1e-9&&1e-9>l&&(l=0),u>-1e-9&&1e-9>u&&(u=0),d>-1e-9&&1e-9>d&&(d=0),c>-1e-9&&1e-9>c&&(c=0),0==u&&0==d)return 0==l||0==c?null:lark.Point.create(t/Math.abs(l),e/Math.abs(c));if(0==l&&0==c)return 0==u||0==d?null:lark.Point.create(e/Math.abs(u),t/Math.abs(d));var p=l*d>=0?d:-d,v=u*c>=0?c:-c,f=l*v-u*p;if(Math.abs(f)<1e-9)return 0==p||0==l||l==-p?null:Math.abs(l*e-u*t)>1e-9?null:s(l,p,t,n,n,r,o,u,v);var m=1/f;t*=m,e*=m;var g;return g=h(l,p,u,v,t,e),g&&n<=g.x&&g.x<=r&&a<=g.y&&g.y<=o&&l*g.x+p*g.x>=0&&u*g.x+v*g.y>=0?g:(g=h(l,p,u,v,t,-e),g&&n<=g.x&&g.x<=r&&a<=g.y&&g.y<=o&&l*g.x+p*g.x>=0&&u*g.x+v*g.y<0?g:(g=h(l,p,u,v,-t,e),g&&n<=g.x&&g.x<=r&&a<=g.y&&g.y<=o&&l*g.x+p*g.x<0&&u*g.x+v*g.y>=0?g:(g=h(l,p,u,v,-t,-e),g&&n<=g.x&&g.x<=r&&a<=g.y&&g.y<=o&&l*g.x+p*g.x<0&&u*g.x+v*g.y<0?g:(lark.Point.release(g),null))))}function o(t,e,i){var n=lark.$TempRectangle.setTo(0,0,t,e);
return i.$transformBounds(n),n}function h(t,e,i,n,a,s){return lark.Point.create(n*a-e*s,t*s-i*a)}var l=.1,u=.1,d=function(){function t(){}var n=t;return p=n.prototype,t.fitBounds=function(t,n,a,s,h,d,c,p,v,f,m){if(isNaN(t)&&isNaN(n))return lark.Point.create(d,c);var g,y=u>p?0:p-u,C=u>v?0:v-u,$=f+u,E=m+u;if(isNaN(t)||isNaN(n))return isNaN(t)?i(n,a,s,h,d,c,y,C,$,E):e(t,a,s,h,d,c,y,C,$,E);if(g=r(t,n,a,y,C,$,E),!g){var _;if(_=e(t,a,s,h,d,c,y,C,$,E)){var I=o(_.x,_.y,a).height;I-l>n&&(lark.Point.release(_),_=null)}var S;if(S=i(n,a,s,h,d,c,y,C,$,E)){var T=o(S.x,S.y,a).width;T-l>t&&(lark.Point.release(S),S=null)}g=_&&S?_.x*_.y>S.x*S.y?_:S:_?_:S,lark.Point.release(_),lark.Point.release(S)}return g},t}();t.MatrixUtil=d,lark.registerClass(d,"swan.sys.MatrixUtil")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(swan){var sys;!function(sys){function getRepeatedIds(t){var e=[];return this.getIds(t,e),this.repeatedIdMap={},e}function getIds(t,e){if(t.namespace!=sys.NS_W&&t.$id){var i=t.$id;this.repeatedIdMap[i]?e.push(toXMLString(t)):this.repeatedIdMap[i]=!0}var n=t.children;if(n)for(var a=n.length,s=0;a>s;s++){var r=n[s];getIds(r,e)}}function toXMLString(t){if(!t)return"";for(var e="  at <"+t.name,i=t.attributes,n=Object.keys(i),a=n.length,s=0;a>s;s++){var r=n[s],o=i[r];("id"!=r||"__"!=o.substring(0,2))&&(e+=" "+r+'="'+o+'"')}return e+=0==t.children.length?"/>":">"}function checkDeclarations(t,e){if(t){var i=t.children;if(i)for(var n=i.length,a=0;n>a;a++){var s=i[a];1==s.nodeType&&(s.attributes.includeIn&&e.push(toXMLString(s)),s.attributes.excludeFrom&&e.push(toXMLString(s)),checkDeclarations(s,e))}}}function getPropertyStr(t){var e=toXMLString(t.parent),i=toXMLString(t).substring(5);return e+"\n      	"+i}sys.exmlConfig;var exmlParserPool=[],parsedClasses={},innerClassCount=1,DECLARATIONS="Declarations",RECTANGLE="lark.Rectangle",TYPE_CLASS="Class",TYPE_ARRAY="Array",TYPE_STATE="State[]",SKIN_NAME="skinName",ELEMENTS_CONTENT="elementsContent",basicTypes=[TYPE_ARRAY,"boolean","string","number"],wingKeys=["id","locked","includeIn","excludeFrom"],htmlEntities=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]],EXMLParser=function(){function EXMLParser(){this.delayAssignmentDic={}}var d=__define,c=EXMLParser;return p=c.prototype,p.parse=function(text){try{var xmlData=lark.XML.parse(text)}catch(e){}var className="",hasClass=!1;xmlData.attributes["class"]?(className=xmlData.attributes["class"],delete xmlData.attributes["class"],hasClass=!!className):className="$exmlClass"+innerClassCount++;var exClass=this.parseClass(xmlData,className),code=exClass.toCode();try{var clazz=eval(code)}catch(e){return null}if(hasClass&&clazz){lark.registerClass(clazz,className);for(var paths=className.split("."),length=paths.length,definition=__global,i=0;length-1>i;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}definition[paths[length-1]]||(definition[paths[length-1]]=clazz)}return clazz},p.parseClass=function(t,e){sys.exmlConfig||(sys.exmlConfig=new sys.EXMLConfig),this.currentXML=t,this.currentClassName=e,this.delayAssignmentDic={},this.idDic={},this.idToNode={},this.stateCode=[],this.stateNames=[],this.skinParts=[],this.bindings=[],this.declarations=null,this.currentClass=new sys.EXClass,this.stateIds=[];var i=e.lastIndexOf(".");this.currentClass.className=-1!=i?e.substring(i+1):e,this.startCompile();var n=this.currentClass;return this.currentClass=null,n},p.startCompile=function(){this.currentClass.superClass=this.getClassNameOfNode(this.currentXML),this.getStateNames();var t=this.currentXML.children;if(t)for(var e=t.length,i=0;e>i;i++){var n=t[i];if(1===n.nodeType&&n.namespace==sys.NS_W&&n.localName==DECLARATIONS){this.declarations=n;break}}this.currentXML.namespace&&(this.addIds(this.currentXML.children),this.createConstructFunc())},p.addIds=function(t){if(t)for(var e=t.length,i=0;e>i;i++){var n=t[i];if(1==n.nodeType&&n.namespace&&!this.isInnerClass(n))if(this.addIds(n.children),n.namespace!=sys.NS_W&&n.localName){if(this.isProperty(n)){var a=n.localName,s=a.indexOf("."),r=n.children;if(-1==s||!r||0==r.length)continue;var o=r[0];this.stateIds.push(o.attributes.id)}else if(1===n.nodeType){var h=n.attributes.id;h?(this.idToNode[h]=n,-1==this.skinParts.indexOf(h)&&this.skinParts.push(h),this.createVarForNode(n),this.isStateNode(n)&&this.stateIds.push(h)):(this.createIdForNode(n),this.idToNode[n.attributes.id]=n,this.isStateNode(n)&&this.stateIds.push(n.attributes.id))}}else;}},p.isInnerClass=function(t){if(t.hasOwnProperty("isInnerClass"))return t.isInnerClass;var e="Skin"==t.localName&&t.namespace==sys.NS_S;if(!e)if(this.isProperty(t))e=!1;else{var i=t.parent;if(this.isProperty(i)){var n=i.localName,a=n.indexOf(".");if(-1!=a){{n.substring(a+1)}n=n.substring(0,a)}i=i.parent}else n=sys.exmlConfig.getDefaultPropById(i.localName,i.namespace);var s=sys.exmlConfig.getClassNameById(i.localName,i.namespace);e=sys.exmlConfig.getPropertyType(n,s)==TYPE_CLASS}return t.isInnerClass=e,e},p.containsState=function(t){var e=t.attributes;if(e.includeIn)return!0;for(var i=Object.keys(e),n=i.length,a=0;n>a;a++){var s=i[a];if(-1!=s.indexOf("."))return!0}return!1},p.createIdForNode=function(t){var e=this.getNodeId(t);this.idDic[e]?this.idDic[e]++:this.idDic[e]=1,e+=this.idDic[e],t.attributes.id=e},p.getNodeId=function(t){return t.attributes.id?t.attributes.id:"_"+t.localName},p.createVarForNode=function(t){var e=this.getClassNameOfNode(t);""!=e&&(this.currentClass.getVariableByName(t.attributes.id)||this.currentClass.addVariable(new sys.EXVariable(t.attributes.id)))},p.createFuncForNode=function(t){var e=t.localName,i=this.isBasicTypeData(e);if(i)return this.createBasicTypeForNode(t);var n=this.getClassNameOfNode(t),a=new sys.EXFunction,s="_i",r=t.attributes.id;a.name=r+s,this.currentClass.addFunction(a);var o=new sys.EXCodeBlock;a.codeBlock=o;var h="t";"Object"==e?o.addVar(h,"{}"):o.addVar(h,"new "+n+"()");var l=!!this.currentClass.getVariableByName(r);l&&o.addAssignment("this."+r,h),this.addAttributesToCodeBlock(o,h,t),this.initlizeChildNode(t,o,h);var u=this.delayAssignmentDic[r];if(u)for(var d=u.length,c=0;d>c;c++){var p=u[c];o.concat(p)}return o.addReturn(h),"this."+a.name+"()"},p.isBasicTypeData=function(t){return-1!=basicTypes.indexOf(t)},p.createBasicTypeForNode=function(t){var e=t.localName,i="",n=this.currentClass.getVariableByName(t.attributes.id),a=t.children,s="";if(a&&a.length>0){var r=a[0];3==r.nodeType&&(s=r.text.trim())}switch(e){case TYPE_ARRAY:var o=[];if(a)for(var h=a.length,l=0;h>l;l++){var u=a[l];1==u.nodeType&&o.push(this.createFuncForNode(u))}i="["+o.join(",")+"]";break;case"boolean":i="false"!=s&&s?"true":"false";break;case"number":i=s,-1!=i.indexOf("%")&&(i=i.substring(0,i.length-1));break;case"string":i=this.formatString(s)}return n&&(n.defaultValue=i),i},p.addAttributesToCodeBlock=function(t,e,i){var n,a,s=i.attributes,r=Object.keys(s);r.sort();for(var o=r.length,h=0;o>h;h++)if(n=r[h],this.isNormalKey(n)&&(a=s[n],n=this.formatKey(n,a),a=this.formatValue(n,a,i))){if(this.currentClass.getVariableByName(a)){var l="this.",u=s.id,d=l+u+" = t;";this.currentClass.getVariableByName(u)||this.createVarForNode(i),t.containsCodeLine(d)||t.addCodeLineAt(d,1);var c=new sys.EXCodeBlock;"this"==e?c.addAssignment(e,l+a,n):(c.startIf(l+u),c.addAssignment(l+u,l+a,n),c.endBlock()),this.delayAssignmentDic[a]||(this.delayAssignmentDic[a]=[]),this.delayAssignmentDic[a].push(c),a=l+a}t.addAssignment(e,a,n)}},p.initlizeChildNode=function(t,e,i){var n=t.children;if(n&&0!=n.length){for(var a=sys.exmlConfig.getClassNameById(t.localName,t.namespace),s=[],r=n.length,o=[],h=0;r>h;h++){var l=n[h];if(1==l.nodeType&&l.namespace!=sys.NS_W)if(this.isInnerClass(l)){if("Skin"==l.localName){var u=this.parseInnerClass(l),d=sys.exmlConfig.getPropertyType(SKIN_NAME,a);d?e.addAssignment(i,u,SKIN_NAME):lark.$error(2005,this.currentClassName,SKIN_NAME,getPropertyStr(l))}}else{var c=l.localName;if(this.isProperty(l)){if(!this.isNormalKey(c))continue;var d=sys.exmlConfig.getPropertyType(l.localName,a);if(!d)continue;if(!l.children||0==l.children.length)continue;var p;this.addChildrenToProp(l.children,d,c,e,i,p,o,t)}else s.push(l)}}if(0!=s.length){var p,v=sys.exmlConfig.getDefaultPropById(t.localName,t.namespace),f=sys.exmlConfig.getPropertyType(v,a);v&&f&&this.addChildrenToProp(s,f,v,e,i,p,o,t)}}},p.parseInnerClass=function(t){var e=exmlParserPool.pop();e||(e=new EXMLParser);var i=this.currentClass.className+"$"+t.localName+innerClassCount++,n=e.parseClass(t,i);return this.currentClass.addInnerClass(n),exmlParserPool.push(e),i},p.addChildrenToProp=function(t,e,i,n,a,s,r,o){var h="",l=t.length;if(l>1){if(e!=TYPE_ARRAY)return;for(var u=[],d=0;l>d;d++){var c=t[d];if(1==c.nodeType){h=this.createFuncForNode(c);var p=this.getClassNameOfNode(c);this.isStateNode(c)||u.push(h)}}h="["+u.join(",")+"]"}else{var v=t[0];if(e==TYPE_ARRAY)if(v.localName==TYPE_ARRAY){if(u=[],v.children)for(var f=v.children.length,m=0;f>m;m++)c=v.children[m],1==c.nodeType&&(h=this.createFuncForNode(c),p=this.getClassNameOfNode(c),this.isStateNode(c)||u.push(h));h="["+u.join(",")+"]"}else{h=this.createFuncForNode(v);var p=this.getClassNameOfNode(v);h=this.isStateNode(v)?"[]":"["+h+"]"}else if(1==v.nodeType)if(e==TYPE_CLASS){if(l>1)return;h=this.parseInnerClass(t[0])}else{{this.getClassNameOfNode(v)}h=this.createFuncForNode(v)}else h=this.formatValue(i,v.text,o)}""!=h&&(-1==h.indexOf("()")&&(i=this.formatKey(i,h)),-1==r.indexOf(i)&&r.push(i),n.addAssignment(a,h,i))},p.isProperty=function(t){if(t.hasOwnProperty("isProperty"))return t.isProperty;var e,i=t.localName;if(i&&1===t.nodeType&&t.parent&&!this.isBasicTypeData(i)){var n=t.parent,a=i.indexOf(".");-1!=a&&(i=i.substr(0,a));var s=sys.exmlConfig.getClassNameById(n.localName,n.namespace);e=!!sys.exmlConfig.getPropertyType(i,s)}else e=!1;return t.isProperty=e,e},p.isNormalKey=function(t){return t&&-1==t.indexOf(".")&&-1==wingKeys.indexOf(t)?!0:!1},p.formatKey=function(t,e){return-1!=e.indexOf("%")&&("height"==t?t="percentHeight":"width"==t&&(t="percentWidth")),t},p.formatValue=function(t,e,i){e||(e="");var n=e;e=e.trim();var a=this.getClassNameOfNode(i),s=sys.exmlConfig.getPropertyType(t,a);if("{"==e.charAt(0)&&"}"==e.charAt(e.length-1))e=e.substr(1,e.length-2).trim(),0==e.indexOf("this.")&&(e=e.substring(5)),this.checkIdForState(i),this.bindings.push(new sys.EXBinding(i.attributes.id,t,e)),e="";else if(s==RECTANGLE){e="new "+RECTANGLE+"("+e+")"}else{switch(s){case TYPE_CLASS:break;case"number":0==e.indexOf("#")?e="0x"+e.substring(1):-1!=e.indexOf("%")&&(e=parseFloat(e.substr(0,e.length-1)).toString());break;case"boolean":e="false"!=e&&e?"true":"false";break;case"string":case"any":e=this.formatString(n)}}return e},p.formatString=function(t){return t=this.unescapeHTMLEntity(t),t=t.split("\n").join("\\n"),t=t.split("\r").join("\\n"),t=t.split('"').join('\\"'),t='"'+t+'"'},p.unescapeHTMLEntity=function(t){if(!t)return"";for(var e=htmlEntities.length,i=0;e>i;i++){var n=htmlEntities[i],a=n[0],s=n[1];t=t.split(s).join(a)}return t},p.createConstructFunc=function(){var t=new sys.EXCodeBlock;t.addEmptyLine();var e="this";if(this.addAttributesToCodeBlock(t,e,this.currentXML),this.declarations){var i=this.declarations.children;if(i&&i.length>0)for(var n=i.length,a=0;n>a;a++){var s=i[a];if(1==s.nodeType){var r=this.createFuncForNode(s);r&&t.addCodeLine(r+";")}}}this.initlizeChildNode(this.currentXML,t,e);var o,h=this.stateIds;if(h.length>0){n=h.length;for(var a=0;n>a;a++)o=h[a],t.addCodeLine("this."+o+"_i();");t.addEmptyLine()}var l=this.skinParts,u="[]";if(n=l.length,n>0){for(a=0;n>a;a++)l[a]='"'+l[a]+'"';u="["+l.join(",")+"]"}var d=new sys.EXFunction;d.name="skinParts",d.isGet=!0;var c=new sys.EXCodeBlock;c.addReturn(u),d.codeBlock=c,this.currentClass.addFunction(d),this.currentXML.attributes.id="",this.createStates(this.currentXML);for(var p,v=this.currentXML,f=(this.getClassNameOfNode(v),v.attributes),m=Object.keys(f),g=m.length,y=0;g>y;y++){var C=m[y],$=f[C],E=C.indexOf(".");if(-1!=E){var _=C.substring(0,E);_=this.formatKey(_,$);var I=this.formatValue(_,$,v);if(!I)continue;var S=C.substr(E+1);p=this.getStateByName(S,v);var T=p.length;if(T>0)for(a=0;T>a;a++){var P=p[a];P.addOverride(new sys.EXSetProperty("",_,I))}}}var x=this.stateCode;if(n=x.length,n>0){var w="	";t.addCodeLine("this.states = [");var L=!0;for(a=0;n>a;a++){P=x[a],L?L=!1:t.addCodeLine(w+",");for(var N=P.toCode().split("\n"),k=0;k<N.length;){var B=N[k];B&&t.addCodeLine(w+B),k++}}t.addCodeLine("];")}var R=this.bindings;if(n=R.length,n>0)for(t.addEmptyLine(),a=0;n>a;a++){var A=R[a];t.addCodeLine(A.toCode())}this.currentClass.constructCode=t},p.isStateNode=function(t){var e=t.attributes;return e.hasOwnProperty("includeIn")||e.hasOwnProperty("excludeFrom")},p.getStateNames=function(){var t=this.currentXML,e=sys.exmlConfig.getClassNameById(t.localName,t.namespace),i=sys.exmlConfig.getPropertyType("states",e);if(i==TYPE_STATE){var n=t.attributes.states;n&&delete t.attributes.states;var a,s=this.stateNames,r=t.children;if(r)for(var o=r.length,h=0;o>h;h++){var l=r[h];if(1==l.nodeType&&"states"==l.localName){l.namespace=sys.NS_W,a=l.children;break}}if(a||n)if(n){var u=n.split(",");o=u.length;for(var h=0;o>h;h++){var d=u[h].trim();d&&(-1==s.indexOf(d)&&s.push(d),this.stateCode.push(new sys.EXState(d)))}}else for(o=a.length,h=0;o>h;h++){var c=a[h];if(1==c.nodeType){var p=[],v=c.attributes;if(v.stateGroups)for(var f=v.stateGroups.split(","),m=f.length,g=0;m>g;g++){var y=f[g].trim();y&&(-1==s.indexOf(y)&&s.push(y),p.push(y))}d=v.name,-1==s.indexOf(d)&&s.push(d),this.stateCode.push(new sys.EXState(d,p))}}}},p.createStates=function(t){var e=t.children;if(e)for(var i=e.length,n=0;i>n;n++){var a=e[n];if(1==a.nodeType&&!this.isInnerClass(a)&&(this.createStates(a),a.namespace!=sys.NS_W&&a.localName))if(this.isProperty(a)){var s=a.localName,r=s.indexOf("."),o=a.children;if(-1==r||!o||0==o.length)continue;var h=s.substring(r+1);s=s.substring(0,r);var l,u=this.getClassNameOfNode(t),d=(sys.exmlConfig.getPropertyType(s,u),o[0]);1==d.nodeType?(this.createFuncForNode(d),this.checkIdForState(d),l="this."+d.attributes.id):l=this.formatValue(s,d.text,t),m=this.getStateByName(h,a);var c=m.length;if(c>0)for(var p=0;c>p;p++)g=m[p],g.addOverride(new sys.EXSetProperty(t.attributes.id,s,l))}else if(this.containsState(a)){{var v=a.attributes,f=v.id;this.getClassNameOfNode(a)}this.checkIdForState(a);var h,m,g;if(this.isStateNode(a)){var y="",C=a.parent;C.localName==TYPE_ARRAY&&(C=C.parent),C&&C.parent&&this.isProperty(C)&&(C=C.parent),C&&C!=this.currentXML&&(y=C.attributes.id,this.checkIdForState(C));var $=this.findNearNodeId(a),E=[];if(v.includeIn)E=v.includeIn.split(",");else{for(var _=v.excludeFrom.split(","),I=_.length,p=0;I>p;p++){var S=_[p];this.getStateByName(S,a)}for(I=this.stateCode.length,p=0;I>p;p++)g=this.stateCode[p],-1==_.indexOf(g.name)&&E.push(g.name)}for(var T=E.length,P=0;T>P;P++)if(h=E[P],m=this.getStateByName(h,a),m.length>0)for(var c=m.length,p=0;c>p;p++)g=m[p],g.addOverride(new sys.EXAddItems(f,y,$.position,$.relativeTo))}for(var x=Object.keys(v),w=x.length,L=0;w>L;L++){S=x[L];var l=v[S],r=S.indexOf(".");if(-1!=r){var N=S.substring(0,r);N=this.formatKey(N,l);var l=this.formatValue(N,l,a);if(!l)continue;h=S.substr(r+1),m=this.getStateByName(h,a);var c=m.length;if(c>0)for(var p=0;c>p;p++)g=m[p],g.addOverride(new sys.EXSetProperty(f,N,l))}}}}},p.checkIdForState=function(t){if(t&&!this.currentClass.getVariableByName(t.attributes.id)){this.createVarForNode(t);var e=t.attributes.id,i=e+"_i",n=this.currentClass.getFuncByName(i);if(n){var a="this."+e+" = t;",s=n.codeBlock;s&&(s.containsCodeLine(a)||s.addCodeLineAt(a,1))}}},p.getStateByName=function(t,e){for(var i=[],n=this.stateCode,a=n.length,s=0;a>s;s++){var r=n[s];if(r.name==t)-1==i.indexOf(r)&&i.push(r);else if(r.stateGroups.length>0){for(var o=!1,h=r.stateGroups.length,l=0;h>l;l++){var u=r.stateGroups[l];if(u==t){o=!0;break}}o&&-1==i.indexOf(r)&&i.push(r)}}return i},p.findNearNodeId=function(t){for(var e,i,n,a=t.parent,s="",r=-1,o=!1,h=a.children,l=h.length,u=0;l>u;u++){var d=h[u];this.isProperty(d)||(d==t?(o=!0,r=u):!o||n||this.isStateNode(d)||(n=d),o||this.isStateNode(d)||(i=d))}return 0==r?(e=0,{position:e,relativeTo:s}):r==l-1?(e=1,{position:e,relativeTo:s}):n&&(e=2,s=n.attributes.id)?(this.checkIdForState(n),{position:e,relativeTo:s}):{position:1,relativeTo:s}},p.getClassNameOfNode=function(t){var e=sys.exmlConfig.getClassNameById(t.localName,t.namespace);return e},EXMLParser}();sys.EXMLParser=EXMLParser,lark.registerClass(EXMLParser,"swan.sys.EXMLParser")}(sys=swan.sys||(swan.sys={}))}(swan||(swan={}));var swan;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.targetLevel=Number.POSITIVE_INFINITY,this.invalidatePropertiesFlag=!1,this.invalidateClientPropertiesFlag=!1,this.invalidatePropertiesQueue=new i,this.invalidateSizeFlag=!1,this.invalidateClientSizeFlag=!1,this.invalidateSizeQueue=new i,this.invalidateDisplayListFlag=!1,this.invalidateDisplayListQueue=new i,this.eventDisplay=new lark.Bitmap,this.listenersAttached=!1}__extends(e,t);var n=e;return p=n.prototype,p.invalidateProperties=function(t){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(t)},p.validateProperties=function(){for(var t=this.invalidatePropertiesQueue,e=t.shift();e;)e.$stage&&e.validateProperties(),e=t.shift();t.isEmpty()&&(this.invalidatePropertiesFlag=!1)},p.invalidateSize=function(t){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(t)},p.validateSize=function(){for(var t=this.invalidateSizeQueue,e=t.pop();e;)e.$stage&&e.validateSize(),e=t.pop();t.isEmpty()&&(this.invalidateSizeFlag=!1)},p.invalidateDisplayList=function(t){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(t)},p.validateDisplayList=function(){for(var t=this.invalidateDisplayListQueue,e=t.shift();e;)e.$stage&&e.validateDisplayList(),e=t.shift();t.isEmpty()&&(this.invalidateDisplayListFlag=!1)},p.attachListeners=function(){this.eventDisplay.on(lark.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.on(lark.Event.RENDER,this.doPhasedInstantiationCallBack,this),lark.sys.$invalidateRenderFlag=!0,this.listenersAttached=!0},p.doPhasedInstantiationCallBack=function(){this.eventDisplay.removeListener(lark.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.removeListener(lark.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},p.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag?this.attachListeners():this.listenersAttached=!1},p.validateClient=function(t){var e,i=!1,n=this.targetLevel;this.targetLevel===Number.POSITIVE_INFINITY&&(this.targetLevel=t.$nestLevel);for(var a=this.invalidatePropertiesQueue,s=this.invalidateSizeQueue,r=this.invalidateDisplayListQueue;!i;){for(i=!0,e=a.removeSmallestChild(t);e;)e.$stage&&e.validateProperties(),e=a.removeSmallestChild(t);for(a.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,e=s.removeLargestChild(t);e;){if(e.$stage&&e.validateSize(),this.invalidateClientPropertiesFlag&&(e=a.removeSmallestChild(t))){a.insert(e),i=!1;break}e=s.removeLargestChild(t)}for(s.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientPropertiesFlag=!1,this.invalidateClientSizeFlag=!1,e=r.removeSmallestChild(t);e;){if(e.$stage&&e.validateDisplayList(),this.invalidateClientPropertiesFlag&&(e=a.removeSmallestChild(t))){a.insert(e),i=!1;break}if(this.invalidateClientSizeFlag&&(e=s.removeLargestChild(t))){s.insert(e),i=!1;break}e=r.removeSmallestChild(t)}r.isEmpty()&&(this.invalidateDisplayListFlag=!1)}n===Number.POSITIVE_INFINITY&&(this.targetLevel=Number.POSITIVE_INFINITY)},e}(lark.EventEmitter);t.Validator=e,lark.registerClass(e,"swan.sys.Validator");var i=function(){function t(){this.depthBins={},this.minDepth=0,this.maxDepth=-1}var e=t;return p=e.prototype,p.insert=function(t){var e=t.$nestLevel;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=e:(e<this.minDepth&&(this.minDepth=e),e>this.maxDepth&&(this.maxDepth=e));var i=this.depthBins[e];i||(i=this.depthBins[e]=new n),i.insert(t)},p.pop=function(){var t,e=this.minDepth;if(e<=this.maxDepth){for(var i=this.depthBins[this.maxDepth];!i||0===i.length;){if(this.maxDepth--,this.maxDepth<e)return null;i=this.depthBins[this.maxDepth]}for(t=i.shift();!(i&&0!=i.length||(this.maxDepth--,this.maxDepth<e));)i=this.depthBins[this.maxDepth]}return t},p.shift=function(){var t,e=this.maxDepth;if(this.minDepth<=e){for(var i=this.depthBins[this.minDepth];!i||0===i.length;){if(this.minDepth++,this.minDepth>e)return null;i=this.depthBins[this.minDepth]}for(t=i.shift();!(i&&0!=i.length||(this.minDepth++,this.minDepth>e));)i=this.depthBins[this.minDepth]}return t},p.removeLargestChild=function(t){for(var e=t.$hashCode,i=t.$nestLevel,n=this.maxDepth,a=i;n>=a;){var s=this.depthBins[n];if(s&&s.length>0){if(n===i){if(s.map[e])return s.remove(t),t}else{if(!lark.is(t,"lark.DisplayObjectContainer"))break;for(var r=s.items,o=s.length,h=0;o>h;h++){var l=r[h];if(t.contains(l))return s.remove(l),l}}n--}else if(n==this.maxDepth&&this.maxDepth--,n--,a>n)break}return null},p.removeSmallestChild=function(t){for(var e=t.$nestLevel,i=e,n=this.maxDepth,a=t.$hashCode;n>=i;){var s=this.depthBins[i];if(s&&s.length>0){if(i===e){if(s.map[a])return s.remove(t),t}else{if(!lark.is(t,"lark.DisplayObjectContainer"))break;for(var r=s.items,o=s.length,h=0;o>h;h++){var l=r[h];if(t.contains(l))return s.remove(l),l}}i++}else if(i==this.minDepth&&this.minDepth++,i++,i>n)break}return null},p.isEmpty=function(){return this.minDepth>this.maxDepth},t}();lark.registerClass(i,"DepthQueue");var n=function(){function t(){this.map={},this.items=[],this.length=0}var e=t;return p=e.prototype,p.insert=function(t){var e=t.$hashCode;this.map[e]||(this.map[e]=!0,this.length++,this.items.push(t))},p.shift=function(){var t=this.items.shift();return t&&(this.map[t.$hashCode]=!1,this.length--),t},p.remove=function(t){var e=this.items.indexOf(t);e>=0&&(this.items.splice(e,1),this.map[t.$hashCode]=!1,this.length--)},t}();lark.registerClass(n,"DepthBin")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.call(this),this.$target=null,this.$useVirtualLayout=!1,this.$typicalWidth=71,this.$typicalHeight=22}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"target",function(){return this.$target},function(t){this.$target!==t&&(this.$target=t,this.clearVirtualLayoutCache())}),i(p,"useVirtualLayout",function(){return this.$useVirtualLayout},function(t){t=!!t,this.$useVirtualLayout!=t&&(this.$useVirtualLayout=t,this.emitWith("useVirtualLayoutChanged"),this.$useVirtualLayout&&!t&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())}),p.setTypicalSize=function(t,e){t=+t||71,e=+e||22,(t!==this.$typicalWidth||e!==this.$typicalHeight)&&(this.$typicalWidth=t,this.$typicalHeight=e,this.$target&&this.$target.invalidateSize())},p.scrollPositionChanged=function(){},p.clearVirtualLayoutCache=function(){},p.elementAdded=function(){},p.elementRemoved=function(){},p.getElementIndicesInView=function(){return null},p.measure=function(){},p.updateDisplayList=function(){},e}(lark.EventEmitter);t.LayoutBase=e,lark.registerClass(e,"swan.LayoutBase")}(swan||(swan={}));var EXML;!function(t){function e(t){return a.parse(t)}function i(t,e,i){var a=r[t];if(a)return void a.push([e,i]);var h=s.pop();h||(h=new lark.HttpRequest),r[t]=[[e,i]],o[h.$hashCode]=t,h.on(lark.Event.COMPLETE,n,null),h.on(lark.Event.IO_ERROR,n,null),h.open(t),h.send()}function n(t){var i=t.currentTarget;i.removeListener(lark.Event.COMPLETE,n,null),i.removeListener(lark.Event.IO_ERROR,n,null);var a=t.type==lark.Event.COMPLETE?i.response:"";if(a)var h=e(a);s.push(i);var l=o[i.$hashCode];delete o[i.$hashCode];var u=r[l];delete r[l];for(var d=u.length,c=0;d>c;c++){var p=u[c];p[0]&&p[1]&&p[0].call(p[1],h,l)}}var a=new swan.sys.EXMLParser,s=[],r={},o={};t.parse=e,t.load=i}(EXML||(EXML={}));var swan;!function(t){var e="swan.UIComponent",i=function(i){function n(){i.call(this),this.explicitHorizontalGap=0/0,this._horizontalGap=6,this.explicitVerticalGap=0/0,this._verticalGap=6,this._columnCount=-1,this._requestedColumnCount=0,this._rowCount=-1,this._requestedRowCount=0,this.explicitColumnWidth=0/0,this._columnWidth=0/0,this.explicitRowHeight=0/0,this._rowHeight=0/0,this._paddingLeft=0,this._paddingRight=0,this._paddingTop=0,this._paddingBottom=0,this._horizontalAlign=t.JustifyAlign.JUSTIFY,this._verticalAlign=t.JustifyAlign.JUSTIFY,this._columnAlign=t.ColumnAlign.LEFT,this._rowAlign=t.RowAlign.TOP,this._orientation=t.TileOrientation.ROWS,this.maxElementWidth=0,this.maxElementHeight=0,this.startIndex=-1,this.endIndex=-1,this.indexInViewCalculated=!1}__extends(n,i);var a=__define,s=n;return p=s.prototype,a(p,"horizontalGap",function(){return this._horizontalGap},function(t){t=+t,t!==this._horizontalGap&&(this.explicitHorizontalGap=t,this._horizontalGap=t,this.invalidateTargetLayout())}),a(p,"verticalGap",function(){return this._verticalGap},function(t){t=+t,t!==this._verticalGap&&(this.explicitVerticalGap=t,this._verticalGap=t,this.invalidateTargetLayout())}),a(p,"columnCount",function(){return this._columnCount},void 0),a(p,"requestedColumnCount",function(){return this._requestedColumnCount},function(t){t=+t||0,this._requestedColumnCount!==t&&(this._requestedColumnCount=t,this._columnCount=t,this.invalidateTargetLayout())}),a(p,"rowCount",function(){return this._rowCount},void 0),a(p,"requestedRowCount",function(){return this._requestedRowCount},function(t){t=+t||0,this._requestedRowCount!=t&&(this._requestedRowCount=t,this._rowCount=t,this.invalidateTargetLayout())}),a(p,"columnWidth",function(){return this._columnWidth},function(t){t=+t,t!==this._columnWidth&&(this.explicitColumnWidth=t,this._columnWidth=t,this.invalidateTargetLayout())}),a(p,"rowHeight",function(){return this._rowHeight},function(t){t=+t,t!==this._rowHeight&&(this.explicitRowHeight=t,this._rowHeight=t,this.invalidateTargetLayout())}),a(p,"paddingLeft",function(){return this._paddingLeft},function(t){t=+t||0,this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetLayout())}),a(p,"paddingRight",function(){return this._paddingRight},function(t){t=+t||0,this._paddingRight!==t&&(this._paddingRight=t,this.invalidateTargetLayout())}),a(p,"paddingTop",function(){return this._paddingTop},function(t){t=+t||0,this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetLayout())}),a(p,"paddingBottom",function(){return this._paddingBottom},function(t){t=+t||0,this._paddingBottom!==t&&(this._paddingBottom=t,this.invalidateTargetLayout())}),a(p,"horizontalAlign",function(){return this._horizontalAlign},function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.invalidateTargetLayout())}),a(p,"verticalAlign",function(){return this._verticalAlign},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.invalidateTargetLayout())}),a(p,"columnAlign",function(){return this._columnAlign},function(t){this._columnAlign!=t&&(this._columnAlign=t,this.invalidateTargetLayout())}),a(p,"rowAlign",function(){return this._rowAlign},function(t){this._rowAlign!=t&&(this._rowAlign=t,this.invalidateTargetLayout())}),a(p,"orientation",function(){return this._orientation},function(t){this._orientation!=t&&(this._orientation=t,this.invalidateTargetLayout())}),p.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},p.measure=function(){var t=this.$target;if(t){var e=this._columnCount,i=this._rowCount,n=this._columnWidth,a=this._rowHeight,s=0,r=0,o=t.$UIComponent;this.calculateRowAndColumn(o[8],o[9]);var h=this._requestedColumnCount>0?this._requestedColumnCount:this._columnCount,l=this._requestedRowCount>0?this._requestedRowCount:this._rowCount,u=isNaN(this._horizontalGap)?0:this._horizontalGap,d=isNaN(this._verticalGap)?0:this._verticalGap;h>0&&(s=h*(this._columnWidth+u)-u),l>0&&(r=l*(this._rowHeight+d)-d);var c=this._paddingLeft+this._paddingRight,p=this._paddingTop+this._paddingBottom;t.setMeasuredSize(s+c,r+p),this._columnCount=e,this._rowCount=i,this._columnWidth=n,this._rowHeight=a}},p.calculateRowAndColumn=function(i,n){var a=this.$target,s=isNaN(this._horizontalGap)?0:this._horizontalGap,r=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var o=a.numElements,h=o,l=0;h>l;l++){var u=a.getElementAt(l);lark.is(u,e)&&u.$includeInLayout||o--}if(0==o)return void(this._rowCount=this._columnCount=0);(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),this._columnWidth=isNaN(this.explicitColumnWidth)?this.maxElementWidth:this.explicitColumnWidth,this._rowHeight=isNaN(this.explicitRowHeight)?this.maxElementHeight:this.explicitRowHeight;var d=this._columnWidth+s;0>=d&&(d=1);var c=this._rowHeight+r;0>=c&&(c=1);var p=this._orientation==t.TileOrientation.COLUMNS,v=!isNaN(i),f=!isNaN(n),m=this._paddingLeft,g=this._paddingRight,y=this._paddingTop,C=this._paddingBottom;if(this._requestedColumnCount>0||this._requestedRowCount>0)this._requestedRowCount>0&&(this._rowCount=Math.min(this._requestedRowCount,o)),this._requestedColumnCount>0&&(this._columnCount=Math.min(this._requestedColumnCount,o));else if(v||f)if(!v||f&&p){var $=Math.max(0,n-y-C);this._rowCount=Math.floor(($+r)/c),this._rowCount=Math.max(1,Math.min(this._rowCount,o))}else{var E=Math.max(0,i-m-g);this._columnCount=Math.floor((E+s)/d),this._columnCount=Math.max(1,Math.min(this._columnCount,o))}else{var _=Math.sqrt(o*d*c);p?this._rowCount=Math.max(1,Math.round(_/c)):this._columnCount=Math.max(1,Math.round(_/d))}-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(o/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(o/this._rowCount))),this._requestedColumnCount>0&&this._requestedRowCount>0&&(this._orientation==t.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(o/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(o/this._requestedRowCount)))},p.updateMaxElementSize=function(){this.$target&&(this.$useVirtualLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth),this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight),this.doUpdateMaxElementSize(this.startIndex,this.endIndex)):this.doUpdateMaxElementSize(0,this.$target.numElements-1))},p.doUpdateMaxElementSize=function(t,i){var n=this.maxElementWidth,a=this.maxElementHeight,s=lark.$TempRectangle,r=this.$target;if(-1!=t&&-1!=i)for(var o=t;i>=o;o++){var h=r.getElementAt(o);lark.is(h,e)&&h.$includeInLayout&&(h.getPreferredBounds(s),n=Math.max(n,s.width),a=Math.max(a,s.height))}this.maxElementWidth=n,this.maxElementHeight=a},p.clearVirtualLayoutCache=function(){i.prototype.clearVirtualLayoutCache.call(this),this.maxElementWidth=0,this.maxElementHeight=0},p.scrollPositionChanged=function(){if(this.$useVirtualLayout){var t=this.getIndexInView();t&&(this.indexInViewCalculated=!0,this.$target.invalidateDisplayList())}},p.getIndexInView=function(){if(!this.$target||0==this.$target.numElements)return this.startIndex=this.endIndex=-1,!1;var e=this.$target,i=e.numElements;if(!this.$useVirtualLayout)return this.startIndex=0,this.endIndex=i-1,!1;var n=e.$UIComponent;if(0==n[10]||0==n[11])return this.startIndex=this.endIndex=-1,!1;var a=this.startIndex,s=this.endIndex,r=this._paddingLeft,o=this._paddingTop,h=isNaN(this._horizontalGap)?0:this._horizontalGap,l=isNaN(this._verticalGap)?0:this._verticalGap;
if(this._orientation==t.TileOrientation.COLUMNS){var u=this._columnWidth+h;if(0>=u)return this.startIndex=0,this.endIndex=i-1,!1;var d=e.scrollH,c=d+n[10],p=Math.floor((d-r)/u);0>p&&(p=0);var v=Math.ceil((c-r)/u);0>v&&(v=0),this.startIndex=Math.min(i-1,Math.max(0,p*this._rowCount)),this.endIndex=Math.min(i-1,Math.max(0,v*this._rowCount-1))}else{var f=this._rowHeight+l;if(0>=f)return this.startIndex=0,this.endIndex=i-1,!1;var m=e.scrollV,g=m+n[11],y=Math.floor((m-o)/f);0>y&&(y=0);var C=Math.ceil((g-o)/f);0>C&&(C=0),this.startIndex=Math.min(i-1,Math.max(0,y*this._columnCount)),this.endIndex=Math.min(i-1,Math.max(0,C*this._columnCount-1))}return this.startIndex!=a||this.endIndex!=s},p.updateDisplayList=function(n,a){if(i.prototype.updateDisplayList.call(this,n,a),this.$target){var s=this.$target,r=this._paddingLeft,o=this._paddingRight,h=this._paddingTop,l=this._paddingBottom;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(n,a),0==this._rowCount||0==this._columnCount)return void s.setContentSize(r+o,h+l);this.adjustForJustify(n,a),this.getIndexInView()}if(this.$useVirtualLayout&&(this.calculateRowAndColumn(n,a),this.adjustForJustify(n,a)),-1==this.startIndex||-1==this.endIndex)return void s.setContentSize(0,0);var u=this.endIndex;s.setVirtualElementIndicesInView(this.startIndex,u);for(var d,c,p,v,f,m=this._orientation==t.TileOrientation.COLUMNS,g=this.startIndex,y=isNaN(this._horizontalGap)?0:this._horizontalGap,C=isNaN(this._verticalGap)?0:this._verticalGap,$=this._rowCount,E=this._columnCount,_=this._columnWidth,I=this._rowHeight,S=this.startIndex;u>=S;S++)this.$useVirtualLayout&&(d=s.getElementAt(S)),lark.is(d,e)&&d.$includeInLayout&&(m?(v=Math.ceil((g+1)/$)-1,f=Math.ceil((g+1)%$)-1,-1==f&&(f=$-1)):(v=Math.ceil((g+1)%E)-1,-1==v&&(v=E-1),f=Math.ceil((g+1)/E)-1),c=v*(_+y)+r,p=f*(I+C)+h,this.sizeAndPositionElement(d,c,p,_,I),g++);var T=r+o,P=h+l,x=(_+y)*E-y,w=(I+C)*$-C;s.setContentSize(x+T,w+P)}},p.sizeAndPositionElement=function(e,i,n,a,s){var r=0/0,o=0/0,h=e.$UIComponent;this._horizontalAlign==t.JustifyAlign.JUSTIFY?r=a:isNaN(h[6])||(r=a*h[6]*.01),this._verticalAlign==t.JustifyAlign.JUSTIFY?o=s:isNaN(h[7])||(o=s*h[7]*.01),e.setLayoutBoundsSize(Math.round(r),Math.round(o));var l=i,u=lark.$TempRectangle;switch(e.getLayoutBounds(u),this._horizontalAlign){case lark.HorizontalAlign.RIGHT:l+=a-u.width;break;case lark.HorizontalAlign.CENTER:l=i+(a-u.width)/2}var d=n;switch(this._verticalAlign){case lark.VerticalAlign.BOTTOM:d+=s-u.height;break;case lark.VerticalAlign.MIDDLE:d+=(s-u.height)/2}e.setLayoutBoundsPosition(Math.round(l),Math.round(d))},p.adjustForJustify=function(e,i){var n=this._paddingLeft,a=this._paddingRight,s=this._paddingTop,r=this._paddingBottom,o=Math.max(0,e-n-a),h=Math.max(0,i-s-r);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var l,u=h-this._rowHeight*this._rowCount,d=o-this._columnWidth*this._columnCount;u>0&&(this._rowAlign==t.RowAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._rowCount-1),this._verticalGap=u/l):this._rowAlign==t.RowAlign.JUSTIFY_USING_HEIGHT&&this._rowCount>0&&(this._rowHeight+=(u-(this._rowCount-1)*this._verticalGap)/this._rowCount)),d>0&&(this._columnAlign==t.ColumnAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._columnCount-1),this._horizontalGap=d/l):this._columnAlign==t.ColumnAlign.JUSTIFY_USING_WIDTH&&this._columnCount>0&&(this._columnWidth+=(d-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},n}(t.LayoutBase);t.TileLayout=i,lark.registerClass(i,"swan.TileLayout")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var n=i;return p=n.prototype,p.measure=function(){e.prototype.measure.call(this),t.sys.measure(this.$target)},p.updateDisplayList=function(i,n){e.prototype.updateDisplayList.call(this,i,n);var a=this.$target,s=t.sys.updateDisplayList(a,i,n);a.setContentSize(Math.ceil(s.x),Math.ceil(s.y))},i}(t.LayoutBase);t.BasicLayout=e,lark.registerClass(e,"swan.BasicLayout")}(swan||(swan={}));var swan;!function(t){var e;!function(t){function e(t){if(t){for(var e=0,i=0,a=lark.$TempRectangle,s=t.numChildren,r=0;s>r;r++){var o=t.getChildAt(r);if(lark.is(o,n)&&o.$includeInLayout){var h,l,u=o.$UIComponent,d=u[4],c=u[5],p=u[0],v=u[1],f=u[2],m=u[3];o.getPreferredBounds(a),isNaN(p)||isNaN(v)?isNaN(d)?isNaN(p)&&isNaN(v)?h=a.x:(h=isNaN(p)?0:p,h+=isNaN(v)?0:v):h=2*Math.abs(d):h=p+v,isNaN(f)||isNaN(m)?isNaN(c)?isNaN(f)&&isNaN(m)?l=a.y:(l=isNaN(f)?0:f,l+=isNaN(m)?0:m):l=2*Math.abs(c):l=f+m;var g=a.width,y=a.height;e=Math.ceil(Math.max(e,h+g)),i=Math.ceil(Math.max(i,l+y))}}t.setMeasuredSize(e,i)}}function i(t,e,i){if(t){for(var a=t.numChildren,s=0,r=0,o=lark.$TempRectangle,h=0;a>h;h++){var l=t.getChildAt(h);if(lark.is(l,n)&&l.$includeInLayout){var u=l.$UIComponent,d=u[4],c=u[5],p=u[0],v=u[1],f=u[2],m=u[3],g=u[6],y=u[7],C=0/0,$=0/0;isNaN(p)||isNaN(v)?isNaN(g)||(C=Math.round(e*Math.min(.01*g,1))):C=e-v-p,isNaN(f)||isNaN(m)?isNaN(y)||($=Math.round(i*Math.min(.01*y,1))):$=i-m-f,l.setLayoutBoundsSize(C,$),l.getLayoutBounds(o);var E=o.width,_=o.height,I=0/0,S=0/0;I=isNaN(d)?isNaN(p)?isNaN(v)?o.x:e-E-v:p:Math.round((e-E)/2+d),S=isNaN(c)?isNaN(f)?isNaN(m)?o.y:i-_-m:f:Math.round((i-_)/2+c),l.setLayoutBoundsPosition(I,S),s=Math.max(s,I+E),r=Math.max(r,S+_)}}return lark.$TempPoint.setTo(s,r)}}var n="swan.UIComponent";t.measure=e,t.updateDisplayList=i}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){var e;!function(e){function i(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d}function n(t,e){if("function"!=typeof t[e])return!1;var i=t[e].toString(),n=i.indexOf("{"),a=i.lastIndexOf("}");return i=i.substring(n+1,a),""==i.trim()}function a(t,e){for(var i in e)"prototype"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);for(var a=t.prototype,s=e.prototype,r=Object.keys(s),o=r.length,h=0;o>h;h++){var l=r[h];if("__meta__"!=l&&(!a.hasOwnProperty(l)||n(a,l))){var u=Object.getOwnPropertyDescriptor(s,l);Object.defineProperty(a,l,u)}}}function s(t,e,i){a(t,h);var n=t.prototype;n.$super=e.prototype,i&&(n.$childAdded=function(){this.invalidateSize(),this.invalidateDisplayList()},n.$childRemoved=function(){this.invalidateSize(),this.invalidateDisplayList()})}var r="swan.UIComponent",o=new e.Validator,h=function(n){function a(){n.call(this),this.initializeUIValues()}__extends(a,n);var s=__define,h=a;return p=h.prototype,p.initializeUIValues=function(){this.$UIComponent={0:0/0,1:0/0,2:0/0,3:0/0,4:0/0,5:0/0,6:0/0,7:0/0,8:0/0,9:0/0,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:0/0,19:0/0,20:0,21:0,22:0,23:0,24:!0,25:!0,26:!0,27:!1,28:!1,29:!1},this.$includeInLayout=!0},p.createChildren=function(){},p.childrenCreated=function(){},p.commitProperties=function(){var e=this.$UIComponent;(e[22]!=e[10]||e[23]!=e[11])&&this.emitWith(lark.Event.RESIZE),(e[20]!=this.$getX()||e[21]!=this.$getY())&&t.UIEvent.emitUIEvent(this,t.UIEvent.MOVE)},p.measure=function(){},p.updateDisplayList=function(){},s(p,"includeInLayout",function(){return this.$includeInLayout},function(t){t=!!t,this.$includeInLayout!==t&&(this.$includeInLayout=!0,this.invalidateParentLayout(),this.$includeInLayout=t)}),p.$onAddToStage=function(e,i){this.$super.$onAddToStage.call(this,e,i),this.checkInvalidateFlag();var n=this.$UIComponent;n[29]||(n[29]=!0,this.createChildren(),this.childrenCreated(),t.UIEvent.emitUIEvent(this,t.UIEvent.CREATION_COMPLETE))},p.checkInvalidateFlag=function(){var t=this.$UIComponent;t[24]&&o.invalidateProperties(this),t[25]&&o.invalidateSize(this),t[26]&&o.invalidateDisplayList(this)},s(p,"left",function(){return this.$UIComponent[0]},function(t){t=+t;var e=this.$UIComponent;e[0]!==t&&(e[0]=t,this.invalidateParentLayout())}),s(p,"right",function(){return this.$UIComponent[1]},function(t){t=+t;var e=this.$UIComponent;e[1]!==t&&(e[1]=t,this.invalidateParentLayout())}),s(p,"top",function(){return this.$UIComponent[2]},function(t){t=+t;var e=this.$UIComponent;e[2]!==t&&(e[2]=t,this.invalidateParentLayout())}),s(p,"bottom",function(){return this.$UIComponent[3]},function(t){t=+t;var e=this.$UIComponent;e[3]!=t&&(e[3]=t,this.invalidateParentLayout())}),s(p,"horizontalCenter",function(){return this.$UIComponent[4]},function(t){t=+t;var e=this.$UIComponent;e[4]!==t&&(e[4]=t,this.invalidateParentLayout())}),s(p,"verticalCenter",function(){return this.$UIComponent[5]},function(t){t=+t;var e=this.$UIComponent;e[5]!==t&&(e[5]=t,this.invalidateParentLayout())}),s(p,"percentWidth",function(){return this.$UIComponent[6]},function(t){t=+t;var e=this.$UIComponent;e[6]!==t&&(e[6]=t,this.invalidateParentLayout())}),s(p,"percentHeight",function(){return this.$UIComponent[7]},function(t){t=+t;var e=this.$UIComponent;e[7]!==t&&(e[7]=t,this.invalidateParentLayout())}),s(p,"explicitWidth",function(){return this.$UIComponent[8]},void 0),s(p,"explicitHeight",function(){return this.$UIComponent[9]},void 0),p.$getWidth=function(){return this.validateSizeNow(),this.$UIComponent[10]},p.$setWidth=function(t){t=+t;var e=this.$UIComponent;0>t||e[10]===t&&e[8]===t||(e[10]=t,e[8]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout())},p.validateSizeNow=function(){this.validateSize(!0),this.updateFinalSize()},p.$getHeight=function(){return this.validateSizeNow(),this.$UIComponent[11]},p.$setHeight=function(t){t=+t;var e=this.$UIComponent;0>t||e[11]===t&&e[9]===t||(e[11]=t,e[9]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout())},p.$setScaleX=function(t){var e=this.$super.$setScaleX.call(this,t);return e&&this.invalidateParentLayout(),e},p.$setScaleY=function(t){var e=this.$super.$setScaleY.call(this,t);return e&&this.invalidateParentLayout(),e},s(p,"minWidth",function(){return this.$UIComponent[12]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[12]===t||(e[12]=t,this.invalidateSize(),this.invalidateParentLayout())}),s(p,"maxWidth",function(){return this.$UIComponent[13]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[13]===t||(e[13]=t,this.invalidateSize(),this.invalidateParentLayout())}),s(p,"minHeight",function(){return this.$UIComponent[14]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[14]===t||(e[14]=t,this.invalidateSize(),this.invalidateParentLayout())}),s(p,"maxHeight",function(){return this.$UIComponent[15]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[15]===t||(e[15]=t,this.invalidateSize(),this.invalidateParentLayout())}),p.setMeasuredSize=function(t,e){var i=this.$UIComponent;i[16]=Math.ceil(+t||0),i[17]=Math.ceil(+e||0)},p.setActualSize=function(t,e){var i=!1,n=this.$UIComponent;n[10]!==t&&(n[10]=t,i=!0),n[11]!==e&&(n[11]=e,i=!0),i&&(this.invalidateDisplayList(),this.emitWith(lark.Event.RESIZE))},p.$setX=function(t){var e=this.$super.$setX.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},p.$setY=function(t){var e=this.$super.$setY.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},p.invalidateProperties=function(){var t=this.$UIComponent;t[24]||(t[24]=!0,this.$stage&&o.invalidateProperties(this))},p.validateProperties=function(){var t=this.$UIComponent;t[24]&&(this.commitProperties(),t[24]=!1)},p.invalidateSize=function(){var t=this.$UIComponent;t[25]||(t[25]=!0,this.$stage&&o.invalidateSize(this))},p.validateSize=function(t){if(t){var e=this.$children;if(e)for(var i=e.length,n=0;i>n;n++){var a=e[n];lark.is(a,r)&&a.validateSize(!0)}}var s=this.$UIComponent;if(s[25]){var o=this.measureSizes();o&&(this.invalidateDisplayList(),this.invalidateParentLayout()),s[25]=!1}},p.measureSizes=function(){var t=!1,e=this.$UIComponent;if(!e[25])return t;(isNaN(e[8])||isNaN(e[9]))&&(this.measure(),e[16]<e[12]&&(e[16]=e[12]),e[16]>e[13]&&(e[16]=e[13]),e[17]<e[14]&&(e[17]=e[14]),e[17]>e[15]&&(e[17]=e[15]));var i=this.getPreferredUWidth(),n=this.getPreferredUHeight();return(i!==e[18]||n!==e[19])&&(e[18]=i,e[19]=n,t=!0),t},p.invalidateDisplayList=function(){var t=this.$UIComponent;t[26]||(t[26]=!0,this.$stage&&o.invalidateDisplayList(this))},p.validateDisplayList=function(){var t=this.$UIComponent;t[26]&&(this.updateFinalSize(),this.updateDisplayList(t[10],t[11]),t[26]=!1)},p.updateFinalSize=function(){var t=0,e=0,i=this.$UIComponent;t=i[27]?i[10]:isNaN(i[8])?i[16]:i[8],e=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.setActualSize(t,e)},p.validateNow=function(){this.$stage&&o.validateClient(this)},p.invalidateParentLayout=function(){var t=this.$parent;t&&this.$includeInLayout&&lark.is(t,r)&&(t.invalidateSize(),t.invalidateDisplayList())},p.setLayoutBoundsSize=function(t,n){if(n=+n,t=+t,!(0>n||0>t)){var a,s,r=this.$UIComponent,o=r[13],h=r[15],l=Math.min(r[12],o),u=Math.min(r[14],h);isNaN(t)?(r[27]=!1,a=this.getPreferredUWidth()):(r[27]=!0,a=Math.max(l,Math.min(o,t))),isNaN(n)?(r[28]=!1,s=this.getPreferredUHeight()):(r[28]=!0,s=Math.max(u,Math.min(h,n)));var d=this.$getMatrix();if(i(d))return void this.setActualSize(a,s);var c=e.MatrixUtil.fitBounds(t,n,d,r[8],r[9],this.getPreferredUWidth(),this.getPreferredUHeight(),l,u,o,h);c||(c=lark.Point.create(l,u)),this.setActualSize(c.x,c.y),lark.Point.release(c)}},p.setLayoutBoundsPosition=function(e,n){var a=this.$getMatrix();if(!i(a)){var s=lark.$TempRectangle;this.getLayoutBounds(s),e+=this.$getX()-s.x,n+=this.$getY()-s.y}var r=this.$super.$setX.call(this,e);(this.$super.$setY.call(this,n)||r)&&t.UIEvent.emitUIEvent(this,t.UIEvent.MOVE)},p.getLayoutBounds=function(t){var e,i=this.$UIComponent;e=i[27]?i[10]:isNaN(i[8])?i[16]:i[8];var n;n=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.applyMatrix(t,e,n)},p.getPreferredUWidth=function(){var t=this.$UIComponent;return isNaN(t[8])?t[16]:t[8]},p.getPreferredUHeight=function(){var t=this.$UIComponent;return isNaN(t[9])?t[17]:t[9]},p.getPreferredBounds=function(t){var e=this.getPreferredUWidth(),i=this.getPreferredUHeight();this.applyMatrix(t,e,i)},p.applyMatrix=function(t,e,n){var t=t.setTo(0,0,e,n),a=this.$getMatrix();i(a)?(t.x+=a.tx,t.y+=a.ty):a.$transformBounds(t)},a}(lark.DisplayObject);e.UIComponentImpl=h,lark.registerClass(h,"swan.sys.UIComponentImpl",["swan.UIComponent"]),e.mixin=a,e.implementUIComponent=s}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.$horizontalAlign="left",this.$verticalAlign="top",this.$gap=6,this.$paddingLeft=0,this.$paddingRight=0,this.$paddingTop=0,this.$paddingBottom=0,this.elementSizeTable=[],this.startIndex=-1,this.endIndex=-1,this.indexInViewCalculated=!1,this.maxElementSize=0}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"horizontalAlign",function(){return this.$horizontalAlign},function(t){this.$horizontalAlign!=t&&(this.$horizontalAlign=t,this.$target&&this.$target.invalidateDisplayList())}),i(p,"verticalAlign",function(){return this.$verticalAlign},function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$target&&this.$target.invalidateDisplayList())}),i(p,"gap",function(){return this.$gap},function(t){t=+t||0,this.$gap!==t&&(this.$gap=t,this.invalidateTargetLayout())}),i(p,"paddingLeft",function(){return this.$paddingLeft},function(t){t=+t||0,this.$paddingLeft!==t&&(this.$paddingLeft=t,this.invalidateTargetLayout())}),i(p,"paddingRight",function(){return this.$paddingRight},function(t){t=+t||0,this.$paddingRight!==t&&(this.$paddingRight=t,this.invalidateTargetLayout())}),i(p,"paddingTop",function(){return this.$paddingTop},function(t){t=+t||0,this.$paddingTop!==t&&(this.$paddingTop=t,this.invalidateTargetLayout())}),i(p,"paddingBottom",function(){return this.$paddingBottom},function(t){t=+t||0,this.$paddingBottom!==t&&(this.$paddingBottom=t,this.invalidateTargetLayout())}),p.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},p.measure=function(){this.$target&&(this.$useVirtualLayout?this.measureVirtual():this.measureReal())},p.measureReal=function(){},p.measureVirtual=function(){},p.updateDisplayList=function(t,e){var i=this.$target;if(i)return 0==i.numElements?void i.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom)):void(this.$useVirtualLayout?this.updateDisplayListVirtual(t,e):this.updateDisplayListReal(t,e))},p.getStartPosition=function(){return 0},p.getElementSize=function(){return 0},p.getElementTotalSize=function(){return 0},p.elementRemoved=function(e){this.$useVirtualLayout&&(t.prototype.elementRemoved.call(this,e),this.elementSizeTable.splice(e,1))},p.clearVirtualLayoutCache=function(){this.$useVirtualLayout&&(this.elementSizeTable=[],this.maxElementSize=0)},p.findIndexAt=function(t,e,i){var n=.5*(e+i)|0,a=this.getStartPosition(n),s=this.getElementSize(n);return t>=a&&t<a+s+this.$gap?n:e==i?-1:a>t?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},p.scrollPositionChanged=function(){if(t.prototype.scrollPositionChanged.call(this),this.$useVirtualLayout){var e=this.getIndexInView();e&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())}},p.getIndexInView=function(){return!1},p.updateDisplayListVirtual=function(){},p.updateDisplayListReal=function(){},p.flexChildrenProportionally=function(t,e,i,n){var a,s=n.length;do{a=!0;var r=e-t*i/100;r>0?e-=r:r=0;for(var o=e/i,h=0;s>h;h++){var l=n[h],u=l.percent*o;if(u<l.min){var d=l.min;l.size=d,n[h]=n[--s],n[s]=l,i-=l.percent,r>=d?r-=d:(e-=d-r,r=0),a=!1;break}if(u>l.max){var c=l.max;l.size=c,n[h]=n[--s],n[s]=l,i-=l.percent,r>=c?r-=c:(e-=c-r,r=0),a=!1;break}l.size=u}}while(!a)},e}(t.LayoutBase);t.LinearLayoutBase=e,lark.registerClass(e,"swan.LinearLayoutBase")}(swan||(swan={}));var swan;!function(t){var e;!function(t){var e=function(){function t(){this.layoutElement=null,this.size=0,this.percent=0/0,this.min=0/0,this.max=0/0}var e=t;return p=e.prototype,t}();t.ChildInfo=e,lark.registerClass(e,"swan.sys.ChildInfo")}(e=t.sys||(t.sys={}))}(swan||(swan={}));var swan;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(){i.call(this),this._widthConstraint=0/0,this.initializeUIValues()}__extends(n,i);var a=n;return p=a.prototype,p.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},p.$setWidth=function(t){i.prototype.$setWidth.call(this,t),e.prototype.$setWidth.call(this,t)},p.$setHeight=function(t){i.prototype.$setHeight.call(this,t),e.prototype.$setHeight.call(this,t)},p.$setText=function(e){i.prototype.$setText.call(this,e),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text")},p.createChildren=function(){},p.childrenCreated=function(){},p.commitProperties=function(){},p.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3],a=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(a=t[13]):a=t[8]:(a=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,a),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},p.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},p.invalidateParentLayout=function(){},p.setMeasuredSize=function(){},p.invalidateProperties=function(){},p.validateProperties=function(){},p.invalidateSize=function(){},p.validateSize=function(){},p.invalidateDisplayList=function(){},p.validateDisplayList=function(){},p.validateNow=function(){},p.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},p.setLayoutBoundsPosition=function(){},p.getLayoutBounds=function(){},p.getPreferredBounds=function(){},n}(lark.TextInput);t.EditableText=i,lark.registerClass(i,"swan.EditableText",["swan.UIComponent"]),t.sys.implementUIComponent(i,lark.TextInput),t.registerBindable(i.prototype,"text")}(swan||(swan={}));var swan;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){i.call(this,t),this._widthConstraint=0/0,this.initializeUIValues()}__extends(n,i);var a=n;return p=a.prototype,p.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},p.$setWidth=function(t){i.prototype.$setWidth.call(this,t),e.prototype.$setWidth.call(this,t)},p.$setHeight=function(t){i.prototype.$setHeight.call(this,t),e.prototype.$setHeight.call(this,t)},p.$setText=function(e){i.prototype.$setText.call(this,e),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text")},p.createChildren=function(){},p.childrenCreated=function(){},p.commitProperties=function(){},p.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3],a=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(a=t[13]):a=t[8]:(a=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,a),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},p.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},p.invalidateParentLayout=function(){},p.setMeasuredSize=function(){},p.invalidateProperties=function(){},p.validateProperties=function(){},p.invalidateSize=function(){},p.validateSize=function(){},p.invalidateDisplayList=function(){},p.validateDisplayList=function(){},p.validateNow=function(){},p.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},p.setLayoutBoundsPosition=function(){},p.getLayoutBounds=function(){},p.getPreferredBounds=function(){},n}(lark.TextField);t.Label=i,lark.registerClass(i,"swan.Label",["swan.UIComponent"]),t.sys.implementUIComponent(i,lark.TextField),t.registerBindable(i.prototype,"text")}(swan||(swan={}));var swan;!function(t){var e=new t.DefaultAssetAdapter,i=function(i){function n(t){i.call(this),this._scale9Grid=null,this._fillMode="scale",this.sourceChanged=!1,this._source=null,this.initializeUIValues(),t&&(this.source=t)}__extends(n,i);var a=__define,s=n;return p=s.prototype,a(p,"scale9Grid",function(){return this._scale9Grid},function(t){this._scale9Grid=t,this.invalidateDisplayList()}),a(p,"fillMode",function(){return this._fillMode},function(t){t!=this._fillMode&&(this._fillMode=t,this.invalidateDisplayList())}),a(p,"source",function(){return this._source},function(t){t!=this._source&&(this._source=t,this.sourceChanged=!0,this.invalidateProperties())}),p.$setBitmapData=function(t){t!=this.$bitmapData&&(i.prototype.$setBitmapData.call(this,t),this._source=t,this.sourceChanged=!1,this.invalidateSize(),this.invalidateDisplayList())},p.parseSource=function(){this.sourceChanged=!1;var t=this._source;if(t&&"string"==typeof t){var i=this.$stage.getImplementation("swan.IAssetAdapter");i||(i=e),i.getAsset(this._source,this.contentChanged,this)}else this.$setBitmapData(t)},p.contentChanged=function(t,e){e===this._source&&lark.is(t,"lark.BitmapData")&&(this.$setBitmapData(t),t&&this.emitWith(lark.Event.COMPLETE))},p.$measureContentBounds=function(t){var e=this.$bitmapData;if(e){var i=this.$UIComponent,n=i[10],a=i[11];if(isNaN(n)||isNaN(a))return void t.setEmpty();"clip"==this._fillMode&&(n>e.width&&(n=e.width),a>e.height&&(a=e.height)),t.setTo(0,0,n,a)}else t.setEmpty()},p.$render=function(t){var e=this.$bitmapData;if(e){var i=this.$UIComponent,n=i[10],a=i[11];if(0!==n&&0!==a)switch(this._fillMode){case"clip":n>e.width&&(n=e.width),a>e.height&&(a=e.height),t.drawImage(e,0,0,n,a,0,0,n,a);break;case"repeat":var s=t.createPattern(e,"repeat");t.beginPath(),t.rect(0,0,n,a),t.fillStyle=s,t.fill();break;default:t.imageSmoothingEnabled=this.$smoothing,this._scale9Grid?this.drawScale9GridImage(t,e,this._scale9Grid,n,a):t.drawImage(e,0,0,n,a)}}},p.drawScale9GridImage=function(t,e,i,n,a){var s=e.width,r=e.height,o=i.x,h=i.y,l=i.width,u=i.height;0==u&&(u=1,h>=r&&h--),0==l&&(l=1,o>=s&&o--);var d=0,c=d+o,p=c+l,v=s-o-l,f=0,m=f+h,g=m+u,y=r-h-u;if(o+v>n||h+y>a)return void t.drawImage(e,0,0,n,a);var C=0,$=C+o,E=C+n-v,_=n-o-v,I=0,S=I+h,T=I+a-y,P=a-h-y;t.drawImage(e,d,f,o,h,C,I,o,h),t.drawImage(e,c,f,l,h,$,I,_,h),t.drawImage(e,p,f,v,h,E,I,v,h),t.drawImage(e,d,m,o,u,C,S,o,P),t.drawImage(e,c,m,l,u,$,S,_,P),t.drawImage(e,p,m,v,u,E,S,v,P),t.drawImage(e,d,g,o,y,C,T,o,y),t.drawImage(e,c,g,l,y,$,T,_,y),t.drawImage(e,p,g,v,y,E,T,v,y)},p.createChildren=function(){},p.childrenCreated=function(){},p.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this),this.sourceChanged&&this.parseSource()},p.measure=function(){var t=this.$bitmapData;t?this.setMeasuredSize(t.width,t.height):this.setMeasuredSize(0,0)},p.updateDisplayList=function(){this.$invalidateContentBounds()},p.invalidateParentLayout=function(){},p.setMeasuredSize=function(){},p.invalidateProperties=function(){},p.validateProperties=function(){},p.invalidateSize=function(){},p.validateSize=function(){},p.invalidateDisplayList=function(){},p.validateDisplayList=function(){},p.validateNow=function(){},p.setLayoutBoundsSize=function(){},p.setLayoutBoundsPosition=function(){},p.getLayoutBounds=function(){},p.getPreferredBounds=function(){},n}(lark.Bitmap);t.Image=i,lark.registerClass(i,"swan.Image",["swan.UIComponent"]),t.sys.implementUIComponent(i,lark.Bitmap),t.registerProperty(i,"scale9Grid","lark.Rectangle")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.apply(this,arguments),this.maxWidth=1e5,this.minWidth=0,this.maxHeight=1e5,this.minHeight=0,this.width=0/0,this.height=0/0,this.$elementsContent=[],this._hostComponent=null,this.$stateValues=new t.sys.StateValues}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"elementsContent",void 0,function(t){this.$elementsContent=t}),n(p,"hostComponent",function(){return this._hostComponent},function(t){if(this._hostComponent!=t){this._hostComponent&&this._hostComponent.removeListener(lark.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._hostComponent=t;var e=this.$stateValues;e.parent=t,t&&(this.commitCurrentState(),this.$stateValues.intialized||(t.$stage?this.initializeStates(t.$stage):t.once(lark.Event.ADDED_TO_STAGE,this.onAddedToStage,this)))}}),p.onAddedToStage=function(){this.initializeStates(this._hostComponent.$stage)},i}(lark.LarkObject);t.Skin=e,lark.registerClass(e,"swan.Skin"),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]")}(swan||(swan={}));var swan;!function(t){var e={},i=function(i){function n(){i.call(this),this.initializeUIValues(),this.$Component={0:null,1:null,2:"",3:!0,4:!1,5:!1,6:!1,7:!1,8:null}}__extends(n,i);var a=__define,s=n;return p=s.prototype,a(p,"hostComponentKey",function(){return this.$Component[0]},function(t){this.$Component[0]=t}),a(p,"skinName",function(){return this.$Component[1]},function(t){var e=this.$Component;e[5]=!0,e[1]!=t&&(e[1]=t,this.$parseSkinName())}),p.$parseSkinName=function(){var t,i=this.skinName;if(i)if(i.prototype)t=new i;else if("string"==typeof i){var n,a=i.trim();if("<"==a.charAt(0))n=EXML.parse(a);else if(".exml"==a.substr(a.length-5,5).toLowerCase()){if(n=e[i],!n)return void EXML.load(i,this.onExmlLoaded,this);this.emitWith(lark.Event.COMPLETE)}else n=lark.getDefinitionByName(i);n&&(t=new n)}else t=i;this.setSkin(t)},p.onExmlLoaded=function(t,i){if(e[i]=t,this.skinName==i){var n=new t;this.setSkin(n),this.emitWith(lark.Event.COMPLETE)}},a(p,"skin",function(){return this.$Component[8]},void 0),p.setSkin=function(e){!e||e instanceof t.Skin||(e=null);var i=this.$Component,n=i[8];if(n){for(var a=n.skinParts,s=a.length,r=0;s>r;r++){var o=a[r];this[o]&&this.setSkinPart(o,null)}var h=n.$elementsContent;if(h){s=h.length;for(var r=0;s>r;r++){var l=h[r];l.$parent==this&&this.removeChild(l)}}n.hostComponent=null}if(i[8]=e,e){for(var a=e.skinParts,s=a.length,r=0;s>r;r++){var o=a[r],u=e[o];u&&this.setSkinPart(o,u)}if(h=e.$elementsContent)for(r=h.length-1;r>=0;r--)this.addChildAt(h[r],0);e.hostComponent=this}this.invalidateSize(),this.invalidateDisplayList()},p.setSkinPart=function(t,e){var i=this[t];i&&this.partRemoved(t,i),this[t]=e,e&&this.partAdded(t,e)},p.partAdded=function(){},p.partRemoved=function(){},p.$setTouchChildren=function(t){t=!!t;var e=this.$Component;e[3]?i.prototype.$setTouchChildren.call(this,t):e[6]=t},p.$setTouchEnabled=function(t){t=!!t;var e=this.$Component;e[3]?i.prototype.$setTouchEnabled.call(this,t):e[7]=t},a(p,"enabled",function(){return this.$Component[3]},function(t){t=!!t,this.$setEnabled(t)}),p.$setEnabled=function(t){var e=this.$Component;t!==e[3]&&(e[3]=t,t?(e[7]=this.$touchEnabled,e[6]=this.$touchChildren):(i.prototype.$setTouchEnabled.call(this,e[7]),i.prototype.$setTouchChildren.call(this,e[6])),this.invalidateState())},a(p,"currentState",function(){var t=this.$Component;return t[2]?t[2]:this.getCurrentState()},function(t){var e=this.$Component;t!=e[2]&&(e[2]=t,this.invalidateState())}),p.invalidateState=function(){var t=this.$Component;t[4]||(t[4]=!0,this.invalidateProperties())},p.getCurrentState=function(){return""},p.createChildren=function(){var t=this.$Component;if(!t[5]){var e=this.$stage.getImplementation("swan.Theme");if(e){var i=e.getSkinName(this);i&&(t[1]=i,this.$parseSkinName())}}},p.childrenCreated=function(){},p.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$Component;e[4]&&(e[4]=!1,e[8]&&(e[8].currentState=this.currentState))},p.measure=function(){t.sys.measure(this);var e=this.$Component[8];if(e){var i=this.$UIComponent;isNaN(e.width)?(i[16]<e.minWidth&&(i[16]=e.minWidth),i[16]>e.maxWidth&&(i[16]=e.maxWidth)):i[16]=e.width,isNaN(e.height)?(i[17]<e.minHeight&&(i[17]=e.minHeight),i[17]>e.maxHeight&&(i[17]=e.maxHeight)):i[17]=e.height}},p.updateDisplayList=function(e,i){t.sys.updateDisplayList(this,e,i)},p.invalidateParentLayout=function(){},p.setMeasuredSize=function(){},p.invalidateProperties=function(){},p.validateProperties=function(){},p.invalidateSize=function(){},p.validateSize=function(){},p.invalidateDisplayList=function(){},p.validateDisplayList=function(){},p.validateNow=function(){},p.setLayoutBoundsSize=function(){},p.setLayoutBoundsPosition=function(){},p.getLayoutBounds=function(){},p.getPreferredBounds=function(){},n}(lark.Sprite);t.Component=i,lark.registerClass(i,"swan.Component",["swan.UIComponent"]),t.registerProperty(i,"skinName","Class"),t.sys.implementUIComponent(i,lark.Sprite,!0)}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.$layout=null,this.$stateValues=new t.sys.StateValues,this.initializeUIValues(),this.$Group={0:0,1:0,2:0,3:0,4:!1,5:!1},this.$stateValues.parent=this}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"elementsContent",void 0,function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])}),n(p,"layout",function(){return this.$layout},function(t){this.$setLayout(t)}),p.$setLayout=function(t){this.$layout!=t&&(this.$layout&&(this.$layout.target=null),this.$layout=t,t&&(t.target=this),this.invalidateSize(),this.invalidateDisplayList())},n(p,"contentWidth",function(){return this.$Group[0]},void 0),n(p,"contentHeight",function(){return this.$Group[1]},void 0),p.setContentSize=function(e,i){e=Math.ceil(+e||0),i=Math.ceil(+i||0);var n=this.$Group,a=n[0]!==e,s=n[1]!==i;(a||s)&&(n[0]=e,n[1]=i,a&&t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentWidth"),s&&t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentHeight"))},n(p,"scrollEnabled",function(){return this.$Group[4]},function(t){t=!!t;var e=this.$Group;t!==e[4]&&(e[4]=t,this.updateScrollRect())}),n(p,"scrollH",function(){return this.$Group[2]},function(e){e=+e||0;var i=this.$Group;e!==i[2]&&(i[2]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollH"))
}),n(p,"scrollV",function(){return this.$Group[3]},function(e){e=+e||0;var i=this.$Group;e!=i[3]&&(i[3]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollV"))}),p.updateScrollRect=function(){var t=this.$Group,e=t[4];if(e){var i=this.$UIComponent;this.scrollRect=lark.$TempRectangle.setTo(t[2],t[3],i[10],i[11])}else this.$scrollRect&&(this.scrollRect=null);return e},n(p,"numElements",function(){return this.$children.length},void 0),p.getElementAt=function(t){return this.$children[t]},p.setVirtualElementIndicesInView=function(){},n(p,"touchThrough",function(){return this.$Group[5]},function(t){this.$Group[5]=!!t}),p.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);if(n||this.$Group[5])return n;if(!this.$visible||!this.touchEnabled)return null;var a=this.globalToLocal(t,i,lark.$TempPoint),s=this.$UIComponent,r=lark.$TempRectangle.setTo(0,0,s[10],s[11]),o=this.$scrollRect;return o&&(r.x=o.x,r.y=o.y),r.contains(a.x,a.y)?this:null},p.invalidateState=function(){var t=this.$stateValues;t.stateIsDirty||(t.stateIsDirty=!0,this.invalidateProperties())},p.getCurrentState=function(){return""},p.createChildren=function(){this.$layout||this.$setLayout(new t.BasicLayout),this.initializeStates(this.$stage)},p.childrenCreated=function(){},p.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$stateValues;e.stateIsDirty&&(e.stateIsDirty=!1,e.explicitState||(e.currentState=this.getCurrentState(),this.commitCurrentState()))},p.measure=function(){return this.$layout?void this.$layout.measure():void this.setMeasuredSize(0,0)},p.updateDisplayList=function(t,e){this.$layout&&this.$layout.updateDisplayList(t,e),this.updateScrollRect()},p.invalidateParentLayout=function(){},p.setMeasuredSize=function(){},p.invalidateProperties=function(){},p.validateProperties=function(){},p.invalidateSize=function(){},p.validateSize=function(){},p.invalidateDisplayList=function(){},p.validateDisplayList=function(){},p.validateNow=function(){},p.setLayoutBoundsSize=function(){},p.setLayoutBoundsPosition=function(){},p.getLayoutBounds=function(){},p.getPreferredBounds=function(){},i}(lark.Sprite);t.Group=e,lark.registerClass(e,"swan.Group",["swan.IViewport","swan.UIComponent"]),t.sys.implementUIComponent(e,lark.Sprite,!0),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]")}(swan||(swan={}));var swan;!function(t){var e="swan.UIComponent",i=function(i){function n(){i.apply(this,arguments)}__extends(n,i);var a=n;return p=a.prototype,p.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,a=0,s=0,r=lark.$TempRectangle,o=0;i>o;o++){var h=t.getElementAt(o);lark.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(r),a+=r.width,s=Math.max(s,r.height)):n--}a+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(a+l,s+u)},p.measureVirtual=function(){for(var t=this.$target,i=this.$typicalWidth,n=this.getElementTotalSize(),a=Math.max(this.maxElementSize,this.$typicalHeight),s=lark.$TempRectangle,r=this.endIndex,o=this.elementSizeTable,h=this.startIndex;r>h;h++){var l=t.getElementAt(h);lark.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(s),n+=s.width,n-=isNaN(o[h])?i:o[h],a=Math.max(a,s.height))}var u=this.$paddingLeft+this.$paddingRight,d=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+u,a+d)},p.updateDisplayListReal=function(i,n){var a=this.$target,s=this.$paddingLeft,r=this.$paddingRight,o=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-s-r),d=Math.max(0,n-o-h),c=this.$horizontalAlign==t.JustifyAlign.JUSTIFY,p=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,v=0;p||(this.$verticalAlign==lark.VerticalAlign.MIDDLE?v=.5:this.$verticalAlign==lark.VerticalAlign.BOTTOM&&(v=1));var f,m,g,y=a.numElements,C=y,$=s,E=o,_=0,I=0,S=[],T=u,P=this.maxElementSize,x=lark.$TempRectangle;for(f=0;y>f;f++){var m=a.getElementAt(f);if(lark.is(m,e)&&m.$includeInLayout)if(m.getPreferredBounds(x),P=Math.max(P,x.height),c)_+=x.width;else{var w=m.$UIComponent;isNaN(w[6])?T-=x.width:(I+=w[6],g=new t.sys.ChildInfo,g.layoutElement=m,g.percent=w[6],g.min=w[12],g.max=w[13],S.push(g))}else C--}T-=l*(C-1),T=T>0?T:0;var L,N=u-_-l*(C-1),k=C,B={};if(c){if(0>N){for(L=T/C,f=0;y>f;f++)m=a.getElementAt(f),lark.is(m,e)&&m.$includeInLayout&&(m.getPreferredBounds(x),x.width<=L&&(T-=x.width,k--));T=T>0?T:0}}else if(I>0){this.flexChildrenProportionally(u,T,I,S);var R=0,A=S.length;for(f=0;A>f;f++){g=S[f];var b=Math.round(g.size+R);R+=g.size-b,B[g.layoutElement.$hashCode]=b,T-=b}T=T>0?T:0}this.$horizontalAlign==lark.HorizontalAlign.CENTER?$=s+.5*T:this.$horizontalAlign==lark.HorizontalAlign.RIGHT&&($=s+T);var M=s,O=o,D=0,z=0,V=Math.ceil(d);this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(V=Math.ceil(Math.max(d,P))),R=0;var H,U;for(f=0;y>f;f++){var G=0;if(m=a.getElementAt(f),lark.is(m,e)&&m.$includeInLayout){if(m.getPreferredBounds(x),H=0/0,c?(U=0/0,N>0?U=T*x.width/_:0>N&&x.width>L&&(U=T/k),isNaN(U)||(H=Math.round(U+R),R+=U-H)):H=B[m.$hashCode],p)E=o,m.setLayoutBoundsSize(H,V),m.getLayoutBounds(x);else{var F=0/0,w=m.$UIComponent;if(!isNaN(m.percentHeight)){var W=Math.min(100,w[7]);F=Math.round(d*W*.01)}m.setLayoutBoundsSize(H,F),m.getLayoutBounds(x),G=(d-x.height)*v,G=G>0?G:0,E=o+G}m.setLayoutBoundsPosition(Math.round($),Math.round(E)),D=Math.ceil(x.width),z=Math.ceil(x.height),M=Math.max(M,$+D),O=Math.max(O,E+z),$+=D+l}}this.maxElementSize=P,a.setContentSize(M+r,O+h)},p.updateDisplayListVirtual=function(i,n){var a=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var s,r=this.$paddingRight,o=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=a.numElements;if(-1==this.startIndex||-1==this.endIndex)return s=this.getStartPosition(u)-l+r,void a.setContentSize(s,a.contentHeight);var d=this.endIndex;a.setVirtualElementIndicesInView(this.startIndex,d);var c=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,p=this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,v=0;c||(this.$verticalAlign==lark.VerticalAlign.MIDDLE?v=.5:this.$verticalAlign==lark.VerticalAlign.BOTTOM&&(v=1));var f,m=lark.$TempRectangle,g=Math.max(0,n-o-h),y=Math.ceil(g),C=this.$typicalHeight,$=this.$typicalWidth,E=this.maxElementSize,_=Math.max(C,this.maxElementSize);if(p){for(var I=this.startIndex;d>=I;I++)f=a.getElementAt(I),lark.is(f,e)&&f.$includeInLayout&&(f.getPreferredBounds(m),E=Math.max(E,m.height));y=Math.ceil(Math.max(g,E))}for(var S,T=0,P=0,x=0,w=!1,L=this.elementSizeTable,N=this.startIndex;d>=N;N++){var k=0;f=a.getElementAt(N),lark.is(f,e)&&f.$includeInLayout&&(f.getPreferredBounds(m),p||(E=Math.max(E,m.height)),c?(P=o,f.setLayoutBoundsSize(0/0,y),f.getLayoutBounds(m)):(f.getLayoutBounds(m),k=(g-m.height)*v,k=k>0?k:0,P=o+k),x=Math.max(x,m.height),w||(S=isNaN(L[N])?$:L[N],S!=m.width&&(w=!0)),L[N]=m.width,T=this.getStartPosition(N),f.setLayoutBoundsPosition(Math.round(T),Math.round(P)))}x+=o+h,s=this.getStartPosition(u)-l+r,this.maxElementSize=E,a.setContentSize(s,x),(w||_<this.maxElementSize)&&a.invalidateSize()},p.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.x}for(var i=this.$typicalWidth,n=this.$paddingLeft,a=this.$gap,s=this.elementSizeTable,r=0;t>r;r++){var o=s[r];isNaN(o)&&(o=i),n+=o+a}return n},p.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalWidth),e}return this.$target?this.$target.getElementAt(t).width:0},p.getElementTotalSize=function(){for(var t=this.$typicalWidth,e=this.$gap,i=0,n=this.$target.numElements,a=this.elementSizeTable,s=0;n>s;s++){var r=a[s];isNaN(r)&&(r=t),i+=r+e}return i-=e},p.elementAdded=function(t){this.useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalWidth))},p.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(e[10]<=0||e[11]<=0)return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingRight,a=t.scrollH;if(a>n-this.$paddingRight)return this.startIndex=-1,this.endIndex=-1,!1;var s=t.scrollH+e[10];if(s<this.$paddingLeft)return this.startIndex=-1,this.endIndex=-1,!1;var r=this.startIndex,o=this.endIndex;return this.startIndex=this.findIndexAt(a,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(s,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),r!=this.startIndex||o!=this.endIndex},n}(t.LinearLayoutBase);t.HorizontalLayout=i,lark.registerClass(i,"swan.HorizontalLayout")}(swan||(swan={}));var swan;!function(t){var e="swan.UIComponent",i=function(i){function n(){i.apply(this,arguments)}__extends(n,i);var a=n;return p=a.prototype,p.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,a=0,s=0,r=lark.$TempRectangle,o=0;i>o;o++){var h=t.getElementAt(o);lark.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(r),s+=r.height,a=Math.max(a,r.width)):n--}s+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(a+l,s+u)},p.measureVirtual=function(){for(var t=this.$target,i=this.$typicalHeight,n=this.getElementTotalSize(),a=Math.max(this.maxElementSize,this.$typicalWidth),s=lark.$TempRectangle,r=this.endIndex,o=this.elementSizeTable,h=this.startIndex;r>h;h++){var l=t.getElementAt(h);lark.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(s),n+=s.height,n-=isNaN(o[h])?i:o[h],a=Math.max(a,s.width))}var u=this.$paddingLeft+this.$paddingRight,d=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(a+u,n+d)},p.updateDisplayListReal=function(i,n){var a=this.$target,s=this.$paddingLeft,r=this.$paddingRight,o=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-s-r),d=Math.max(0,n-o-h),c=this.$verticalAlign==t.JustifyAlign.JUSTIFY,p=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,v=0;p||(this.$horizontalAlign==lark.HorizontalAlign.CENTER?v=.5:this.$horizontalAlign==lark.HorizontalAlign.RIGHT&&(v=1));var f,m,g,y=a.numElements,C=y,$=s,E=o,_=0,I=0,S=[],T=d,P=this.maxElementSize,x=lark.$TempRectangle;for(f=0;y>f;f++){var m=a.getElementAt(f);if(lark.is(m,e)&&m.$includeInLayout)if(m.getPreferredBounds(x),P=Math.max(P,x.width),c)_+=x.height;else{var w=m.$UIComponent;isNaN(w[7])?T-=x.height:(I+=w[7],g=new t.sys.ChildInfo,g.layoutElement=m,g.percent=w[7],g.min=w[14],g.max=w[15],S.push(g))}else C--}T-=l*(C-1),T=T>0?T:0;var L,N=d-_-l*(C-1),k=C,B={};if(c){if(0>N){for(L=T/C,f=0;y>f;f++)m=a.getElementAt(f),lark.is(m,e)&&m.$includeInLayout&&(m.getPreferredBounds(x),x.height<=L&&(T-=x.height,k--));T=T>0?T:0}}else if(I>0){this.flexChildrenProportionally(d,T,I,S);var R=0,A=S.length;for(f=0;A>f;f++){g=S[f];var b=Math.round(g.size+R);R+=g.size-b,B[g.layoutElement.$hashCode]=b,T-=b}T=T>0?T:0}this.$verticalAlign==lark.VerticalAlign.MIDDLE?E=o+.5*T:this.$verticalAlign==lark.VerticalAlign.BOTTOM&&(E=o+T);var M=s,O=o,D=0,z=0,V=Math.ceil(u);this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(V=Math.ceil(Math.max(u,P))),R=0;var H,U;for(f=0;y>f;f++){var G=0;if(m=a.getElementAt(f),lark.is(m,e)&&m.$includeInLayout){if(m.getPreferredBounds(x),H=0/0,c?(U=0/0,N>0?U=T*x.height/_:0>N&&x.height>L&&(U=T/k),isNaN(U)||(H=Math.round(U+R),R+=U-H)):H=B[m.$hashCode],p)$=s,m.setLayoutBoundsSize(V,H),m.getLayoutBounds(x);else{var F=0/0,w=m.$UIComponent;if(!isNaN(w[6])){var W=Math.min(100,w[6]);F=Math.round(u*W*.01)}m.setLayoutBoundsSize(F,H),m.getLayoutBounds(x),G=(u-x.width)*v,G=G>0?G:0,$=s+G}m.setLayoutBoundsPosition(Math.round($),Math.round(E)),D=Math.ceil(x.width),z=Math.ceil(x.height),M=Math.max(M,$+D),O=Math.max(O,E+z),E+=z+l}}this.maxElementSize=P,a.setContentSize(M+r,O+h)},p.updateDisplayListVirtual=function(i){var n=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var a,s=this.$paddingBottom,r=this.$paddingTop,o=this.$paddingRight,h=this.$gap,l=n.numElements;if(-1==this.startIndex||-1==this.endIndex)return a=this.getStartPosition(l)-h+s,void n.setContentSize(n.contentWidth,a);var u=this.endIndex;n.setVirtualElementIndicesInView(this.startIndex,u);var d=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,c=this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,p=0;d||(this.$horizontalAlign==lark.HorizontalAlign.CENTER?p=.5:this.$horizontalAlign==lark.HorizontalAlign.RIGHT&&(p=1));var v,f=lark.$TempRectangle,m=Math.max(0,i-r-o),g=Math.ceil(m),y=this.$typicalHeight,C=this.$typicalWidth,$=this.maxElementSize,E=Math.max(C,this.maxElementSize);if(c){for(var _=this.startIndex;u>=_;_++)v=n.getElementAt(_),lark.is(v,e)&&v.$includeInLayout&&(v.getPreferredBounds(f),$=Math.max($,f.width));g=Math.ceil(Math.max(m,$))}for(var I,S=0,T=0,P=0,x=!1,w=this.elementSizeTable,L=this.startIndex;u>=L;L++){var N=0;v=n.getElementAt(L),lark.is(v,e)&&v.$includeInLayout&&(v.getPreferredBounds(f),c||($=Math.max($,f.width)),d?(S=r,v.setLayoutBoundsSize(g,0/0),v.getLayoutBounds(f)):(v.getLayoutBounds(f),N=(m-f.width)*p,N=N>0?N:0,S=r+N),P=Math.max(P,f.width),x||(I=isNaN(w[L])?y:w[L],I!=f.height&&(x=!0)),w[L]=f.height,T=this.getStartPosition(L),v.setLayoutBoundsPosition(Math.round(S),Math.round(T)))}P+=r+o,a=this.getStartPosition(l)-h+s,this.maxElementSize=$,n.setContentSize(P,a),(x||E<this.maxElementSize)&&n.invalidateSize()},p.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.y}for(var i=this.$typicalHeight,n=this.$paddingTop,a=this.$gap,s=this.elementSizeTable,r=0;t>r;r++){var o=s[r];isNaN(o)&&(o=i),n+=o+a}return n},p.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalHeight),e}return this.$target?this.$target.getElementAt(t).height:0},p.getElementTotalSize=function(){for(var t=this.$typicalHeight,e=this.$gap,i=0,n=this.$target.numElements,a=this.elementSizeTable,s=0;n>s;s++){var r=a[s];isNaN(r)&&(r=t),i+=r+e}return i-=e},p.elementAdded=function(t){this.$useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalHeight))},p.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(0==e[10]||0==e[11])return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingBottom,a=t.scrollV;if(a>n-this.$paddingBottom)return this.startIndex=-1,this.endIndex=-1,!1;var s=t.scrollV+e[11];if(s<this.$paddingTop)return this.startIndex=-1,this.endIndex=-1,!1;var r=this.startIndex,o=this.endIndex;return this.startIndex=this.findIndexAt(a,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(s,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),r!=this.startIndex||o!=this.endIndex},n}(t.LinearLayoutBase);t.VerticalLayout=i,lark.registerClass(i,"swan.VerticalLayout")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.closeButton=null,this.moveArea=null,this.titleDisplay=null,this._title="",this.offsetPointX=0,this.offsetPointY=0,this.on(lark.TouchEvent.TOUCH_BEGIN,this.onWindowTouchBegin,this,!1,100)}__extends(i,e);var n=__define,a=i;return p=a.prototype,p.onWindowTouchBegin=function(){this.$parent.addChild(this)},n(p,"elementsContent",void 0,function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])}),n(p,"title",function(){return this._title},function(t){this._title=t,this.titleDisplay&&(this.titleDisplay.text=this.title)}),p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.titleDisplay?this.titleDisplay.text=this._title:i==this.moveArea?this.moveArea.on(lark.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.on(lark.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},p.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.moveArea?this.moveArea.removeListener(lark.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.removeListener(lark.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},p.onCloseButtonClick=function(){t.UIEvent.emitUIEvent(this,t.UIEvent.CLOSING)&&this.close()},p.close=function(){this.$parent&&this.$parent.removeChild(this)},p.onTouchBegin=function(t){this.$includeInLayout=!1,this.offsetPointX=this.x-t.$stageX,this.offsetPointY=this.y-t.$stageY,this.$stage.on(lark.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.on(lark.TouchEvent.TOUCH_END,this.onTouchEnd,this)},p.onTouchMove=function(t){this.x=t.$stageX+this.offsetPointX,this.y=t.$stageY+this.offsetPointY},p.onTouchEnd=function(){this.$stage.removeListener(lark.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.removeListener(lark.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i}(t.Component);t.Panel=e,lark.registerClass(e,"swan.Panel"),t.registerProperty(e,"elementsContent","Array",!0)}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.horizontalScrollBar=null,this.verticalScrollBar=null;var i=new t.sys.TouchScroll(this.horizontalUpdateHandler,this.horizontalEndHandler,this),n=new t.sys.TouchScroll(this.verticalUpdateHandler,this.verticalEndHanlder,this);this.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:i,9:n,10:null,11:null,12:null}}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"scrollPolicyV",function(){return this.$Scroller[0]},function(t){var e=this.$Scroller;t[0]!=t&&(e[0]=t,this.checkScrollPolicy())}),n(p,"scrollPolicyH",function(){return this.$Scroller[1]},function(t){var e=this.$Scroller;e[1]!=t&&(e[1]=t,this.checkScrollPolicy())}),n(p,"viewport",function(){return this.$Scroller[12]},function(t){var e=this.$Scroller;t!=e[12]&&(this.uninstallViewport(),e[12]=t,this.installViewport())}),p.installViewport=function(){var t=this.viewport;t&&(t.scrollEnabled=!0,t.on(lark.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.on(lark.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),this.addChildAt(t,0)),this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=t),this.verticalScrollBar&&(this.verticalScrollBar.viewport=t)},p.uninstallViewport=function(){this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=null),this.verticalScrollBar&&(this.verticalScrollBar.viewport=null);var t=this.viewport;t&&(t.scrollEnabled=!1,t.removeListener(lark.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.removeListener(lark.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),this.removeChild(t))},p.setSkin=function(t){e.prototype.setSkin.call(this,t);var i=this.viewport;i&&this.addChildAt(i,0)},p.onTouchEndCapture=function(t){this.$Scroller[11]&&this.delayEmitEvent(t)},p.onTouchBeginCapture=function(t){var e=this.checkScrollPolicy();if(e){for(var n=t.target;n!=this;){if(n instanceof i&&(e=n.checkScrollPolicy()))return;n=n.$parent}this.delayEmitEvent(t),this.onTouchBegin(t)}},p.delayEmitEvent=function(t){var e=this.$Scroller;e[11]&&this.onDelayTouchEventTimer(),t.stopPropagation();var i=lark.Event.create(lark.TouchEvent,t.$type,t.$bubbles,t.$cancelable);i.$setTo(t.$stageX,t.$stageY,t.touchPointID),i.$target=t.$target,e[11]=i,e[10]||(e[10]=new lark.Timer(100,1),e[10].on(lark.TimerEvent.TIMER_COMPLETE,this.onDelayTouchEventTimer,this)),e[10].start()},p.onDelayTouchEventTimer=function(){var t=this.$Scroller;t[10].stop();var e=t[11];t[11]=null;var i=t[12];if(i){for(var n=e.$target,a=this.$getPropagationList(n),s=a.length,r=.5*a.length,o=-1,h=0;s>h;h++)if(a[h]===i){o=h;break}a.splice(0,o+1),r-=o+1,this.$emitPropagationEvent(e,a,r),lark.Event.release(e)}},p.checkScrollPolicy=function(){var t,e=this.$Scroller,i=e[12],n=i.$UIComponent;switch(e[1]){case"auto":t=i.contentWidth>n[10]?!0:!1;break;case"on":t=!0;break;case"off":t=!1}e[6]=t;var a;switch(e[0]){case"auto":a=i.contentHeight>n[11]?!0:!1;break;case"on":a=!0;break;case"off":a=!1}return e[7]=a,t||a},p.onTouchBegin=function(t){if(!t.isDefaultPrevented()&&this.checkScrollPolicy()){var e=this.$Scroller;e[9].stop(),e[8].stop();var i=e[12];e[3]=t.$stageX,e[4]=t.$stageY;var n=i.$UIComponent;e[6]&&e[8].start(t.$stageX,i.scrollH,i.contentWidth-n[10]),e[7]&&e[9].start(t.$stageY,i.scrollV,i.contentHeight-n[11]);var a=this.$stage;a.on(lark.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),a.on(lark.TouchEvent.TOUCH_END,this.onTouchEnd,this),t.preventDefault()}},p.onTouchMove=function(e){var n=this.$Scroller;if(!n[5]){if(Math.abs(n[3]-e.$stageX)<i.scrollThreshold&&Math.abs(n[4]-e.$stageY)<i.scrollThreshold)return;n[5]=!0;var a=this.horizontalScrollBar,s=this.verticalScrollBar;a&&n[6]&&(a.visible=!0),s&&n[7]&&(s.visible=!0),n[2]&&n[2].reset()}t.UIEvent.emitUIEvent(this,t.UIEvent.CHANGE_START),n[11]&&(n[11]=null,n[10].stop());var r=n[12],o=r.$UIComponent;n[6]&&n[8].update(e.$stageX,r.contentWidth-o[10]),n[7]&&n[9].update(e.$stageY,r.contentHeight-o[11])},p.onTouchEnd=function(t){var e=this.$Scroller;e[5]=!1;var i=t.$currentTarget;i.removeListener(lark.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),i.removeListener(lark.TouchEvent.TOUCH_END,this.onTouchEnd,this);var n=e[12],a=n.$UIComponent;e[8].isStarted()&&e[8].finish(n.scrollH,n.contentWidth-a[10]),e[9].isStarted()&&e[9].finish(n.scrollV,n.contentHeight-a[11])},p.horizontalUpdateHandler=function(t){this.$Scroller[12].scrollH=t},p.verticalUpdateHandler=function(t){this.$Scroller[12].scrollV=t},p.horizontalEndHandler=function(){this.$Scroller[9].isPlaying()||this.onChangeEnd()},p.verticalEndHanlder=function(){this.$Scroller[8].isPlaying()||this.onChangeEnd()},p.onChangeEnd=function(){var e=this.$Scroller,i=this.horizontalScrollBar,n=this.verticalScrollBar;(i&&i.visible||n&&n.visible)&&(e[2]||(e[2]=new lark.Timer(200,1),e[2].on(lark.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)),e[2].reset(),e[2].start()),t.UIEvent.emitUIEvent(this,t.UIEvent.CHANGE_END)},p.onAutoHideTimer=function(){var t=this.horizontalScrollBar,e=this.verticalScrollBar;t&&(t.visible=!1),e&&(e.visible=!1)},p.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i);var n=this.viewport;n&&(n.setLayoutBoundsSize(t,i),n.setLayoutBoundsPosition(0,0))},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.horizontalScrollBar?(this.horizontalScrollBar.touchChildren=!1,this.horizontalScrollBar.touchEnabled=!1,this.horizontalScrollBar.viewport=this.viewport,this.horizontalScrollBar.visible=!1):i==this.verticalScrollBar&&(this.verticalScrollBar.touchChildren=!1,this.verticalScrollBar.touchEnabled=!1,this.verticalScrollBar.viewport=this.viewport,this.verticalScrollBar.visible=!1)},i.scrollThreshold=5,i}(t.Component);t.Scroller=e,lark.registerClass(e,"swan.Scroller"),t.registerProperty(e,"viewport","swan.IViewport",!0)}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.thumb=null,this.$viewport=null}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"viewport",function(){return this.$viewport},function(e){if(e!=this.$viewport){var i=this.$viewport;i&&(i.removeListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),i.removeListener(lark.Event.RESIZE,this.onViewportResize,this)),this.$viewport=e,e&&(e.on(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),e.on(lark.Event.RESIZE,this.onViewportResize,this)),this.invalidateDisplayList()}}),p.onViewportResize=function(){this.invalidateDisplayList()},p.onPropertyChanged=function(){},i}(t.Component);t.ScrollBarBase=e,lark.registerClass(e,"swan.ScrollBarBase")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.call(this),this.labelDisplay=null,this._label="",this.iconDisplay=null,this._icon=null,this.touchCaptured=!1,this.touchChildren=!1,this.on(lark.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"label",function(){return this._label},function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t)}),i(p,"icon",function(){return this._icon},function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=t)}),p.onTouchBegin=function(t){this.$stage.on(lark.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},p.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeListener(lark.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.contains(t.target)&&this.buttonReleased(),this.touchCaptured=!1,this.invalidateState()},p.getCurrentState=function(){return this.enabled?this.touchCaptured?"down":"up":"disabled"},p.partAdded=function(t,e){e===this.labelDisplay?this.labelDisplay.text=this._label:e==this.iconDisplay&&(this.iconDisplay.source=this._icon)},p.buttonReleased=function(){},e}(t.Component);t.Button=e,lark.registerClass(e,"swan.Button")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.$Range={0:100,1:!1,2:0,3:!1,4:0,5:0,6:!1,7:1,8:!1,9:!1}}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"maximum",function(){return this.$Range[0]},function(t){t=+t||0;var e=this.$Range;t!==e[0]&&(e[0]=t,e[1]=!0,this.invalidateProperties(),this.invalidateDisplayList())}),n(p,"minimum",function(){return this.$Range[2]},function(t){t=+t||0;var e=this.$Range;t!==e[2]&&(e[2]=t,e[3]=!0,this.invalidateProperties(),this.invalidateDisplayList())}),n(p,"value",function(){var t=this.$Range;return t[6]?t[5]:t[4]},function(t){t=+t||0,this.$setValue(t)}),p.$setValue=function(t){if(t!==this.value){var e=this.$Range;e[5]=t,e[6]=!0,this.invalidateProperties()}},n(p,"snapInterval",function(){return this.$Range[7]},function(t){var e=this.$Range;e[9]=!0,t=+t||0,t!==e[7]&&(isNaN(t)?(e[7]=1,e[9]=!1):e[7]=t,e[8]=!0,this.invalidateProperties())}),p.commitProperties=function(){e.prototype.commitProperties.call(this);var t=this.$Range;if(t[2]>t[0]&&(t[1]?t[0]=t[2]:t[2]=t[0]),t[6]||t[1]||t[3]||t[8]){var i=t[6]?t[5]:t[4];t[6]=!1,t[1]=!1,t[3]=!1,t[8]=!1,this.setValue(this.nearestValidValue(i,t[7]))}},p.nearestValidSize=function(t){var e=this.snapInterval;if(0==e)return t;var i=Math.round(t/e)*e;return Math.abs(i)<e?e:i},p.nearestValidValue=function(t,e){var i=this.$Range;if(0==e)return Math.max(i[2],Math.min(i[0],t));var n=i[0]-i[2],a=1;if(t-=i[2],e!=Math.round(e)){var s=(1+e).toString().split(".");a=Math.pow(10,s[1].length),n*=a,t=Math.round(t*a),e=Math.round(e*a)}var r=Math.max(0,Math.floor(t/e)*e),o=Math.min(n,Math.floor((t+e)/e)*e),h=t-r>=(o-r)/2?o:r;return h/a+i[2]},p.setValue=function(e){var i=this.$Range;i[4]!==e&&(i[4]=i[0]>i[2]?Math.min(i[0],Math.max(i[2],e)):e,i[6]=!1,this.invalidateDisplayList(),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"value"))},p.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.updateSkinDisplayList()},p.updateSkinDisplayList=function(){},i}(t.Component);t.Range=e,lark.registerClass(e,"swan.Range"),t.registerBindable(e.prototype,"value")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this._data=null,this._selected=!1,this.itemIndex=-1,this.touchCaptured=!1,this.on(lark.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"data",function(){return this._data},function(e){this._data=e,t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()}),p.dataChanged=function(){},n(p,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.invalidateState())}),p.onTouchBegin=function(t){this.$stage.on(lark.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},p.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeListener(lark.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},p.getCurrentState=function(){var t="up";(this._selected||this.touchCaptured)&&(t="down");var e=t+"AndSelected";return this.hasState(e)?e:t},i}(t.Group);t.ItemRenderer=e,lark.registerClass(e,"swan.ItemRenderer",["swan.IItemRenderer","swan.UIComponent"]),t.registerBindable(e.prototype,"data")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this._selectedChild=null,this.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION,this._selectedIndex=-1}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"layout",function(){return this.$layout},void 0),n(p,"selectedChild",function(){var t=this.selectedIndex;return t>=0&&t<this.numChildren?this.getChildAt(t):null},function(t){var e=this.getChildIndex(t);e>=0&&e<this.numChildren&&this.setSelectedIndex(e)}),n(p,"selectedIndex",function(){return this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},function(t){t=0|+t,this.setSelectedIndex(t)}),p.setSelectedIndex=function(e){e!=this.selectedIndex&&(this.proposedSelectedIndex=e,this.invalidateProperties(),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},p.$childAdded=function(i,n){e.prototype.$childAdded.call(this,i,n),this.showOrHide(i,!1);var a=this.selectedIndex;-1==a?this.setSelectedIndex(n):n<=this.selectedIndex&&this.$stage&&this.setSelectedIndex(a+1),t.CollectionEvent.emitCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.ADD,n,-1,[i.name])},p.$childRemoved=function(i,n){e.prototype.$childRemoved.call(this,i,n),this.showOrHide(i,!0);var a=this.selectedIndex;n==a?this.numChildren>0?0==n?(this.proposedSelectedIndex=0,this.invalidateProperties()):this.setSelectedIndex(0):this.setSelectedIndex(-1):a>n&&this.setSelectedIndex(a-1),t.CollectionEvent.emitCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.REMOVE,n,-1,[i.name])},p.commitProperties=function(){e.prototype.commitProperties.call(this),this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION)},p.commitSelection=function(t){t>=0&&t<this.numChildren?(this._selectedIndex=t,this._selectedChild&&this.showOrHide(this._selectedChild,!1),this._selectedChild=this.getElementAt(this._selectedIndex),this.showOrHide(this._selectedChild,!0)):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},p.showOrHide=function(t,e){lark.is(t,"swan.UIComponent")&&(t.includeInLayout=e),t.visible=e},n(p,"length",function(){return this.$children.length},void 0),p.getItemAt=function(t){var e=this.$children[t];return e?e.name:""},p.getItemIndex=function(t){for(var e=this.$children,i=e.length,n=0;i>n;n++)if(e[n].name==t)return n;return-1},i}(t.Group);t.ViewStack=e,lark.registerClass(e,"swan.ViewStack",["swan.ICollection","lark.IEventEmitter"]),t.registerBindable(e.prototype,"selectedIndex")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.$dataProviderChanged=!1,this.$dataProvider=null,this.$indexToRenderer=[],this.$DataGroup={0:!0,1:!1,2:{},3:{},4:!1,5:!1,6:null,7:null,8:!1,9:null,10:!1,11:!1,12:null}}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"useVirtualLayout",function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},function(t){t=!!t;var e=this.$DataGroup;t!==e[0]&&(e[0]=t,this.$layout&&(this.$layout.useVirtualLayout=t))}),p.$setLayout=function(t){if(t!=this.$layout&&(this.$layout&&(this.$layout.setTypicalSize(0,0),this.$layout.removeListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)),this.$layout&&t&&this.$layout.$useVirtualLayout!=t.$useVirtualLayout&&this.onUseVirtualLayoutChanged(),e.prototype.$setLayout.call(this,t),t)){var i=this.$DataGroup[9];
i&&t.setTypicalSize(i.width,i.height),t.useVirtualLayout=this.$DataGroup[0],t.on("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}},p.onUseVirtualLayoutChanged=function(){var t=this.$DataGroup;t[1]=!0,t[10]=!0,this.removeDataProviderListener(),this.invalidateProperties()},p.setVirtualElementIndicesInView=function(t,e){if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),a=n.length,s=0;a>s;s++){var r=+n[s];(t>r||r>e)&&this.freeRendererByIndex(r)}},p.getElementAt=function(t){if(t=0|+t,0>t||t>=this.$dataProvider.length)return null;var e=this.$indexToRenderer[t];if(!e){var i=this.$dataProvider.getItemAt(t);e=this.createVirtualRenderer(i),this.$indexToRenderer[t]=e,this.updateRenderer(e,t,i);var n=this.$DataGroup;n[4]&&(e.validateNow(),n[4]=!1,this.rendererAdded(e,t,i))}return e},p.freeRendererByIndex=function(t){var e=this.$indexToRenderer[t];e&&(delete this.$indexToRenderer[t],this.doFreeRenderer(e))},p.doFreeRenderer=function(t){var e=this.$DataGroup,i=e[2][t.$hashCode],n=i.$hashCode;e[3][n]||(e[3][n]=[]),e[3][n].push(t),t.visible=!1},p.invalidateSize=function(){this.$DataGroup[4]||e.prototype.invalidateSize.call(this)},p.createVirtualRenderer=function(t){var e,i=this.itemToRendererClass(t),n=i.$hashCode,a=this.$DataGroup,s=a[3];return s[n]&&s[n].length>0?(e=s[n].pop(),e.visible=!0,e):(a[4]=!0,this.createOneRenderer(i))},p.createOneRenderer=function(t){var e=new t;return this.$DataGroup[2][e.$hashCode]=t,lark.is(e,"swan.IItemRenderer")?(this.addChild(e),e):null},n(p,"dataProvider",function(){return this.$dataProvider},function(t){this.$setDataProvider(t)}),p.$setDataProvider=function(t){this.$dataProvider!=t&&(this.removeDataProviderListener(),this.$dataProvider=t,this.$dataProviderChanged=!0,this.$DataGroup[10]=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},p.removeDataProviderListener=function(){this.$dataProvider&&this.$dataProvider.removeListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},p.onCollectionChange=function(e){switch(e.kind){case t.CollectionEventKind.ADD:this.itemAddedHandler(e.items,e.location);break;case t.CollectionEventKind.REMOVE:this.itemRemovedHandler(e.items,e.location);break;case t.CollectionEventKind.UPDATE:case t.CollectionEventKind.REPLACE:this.itemUpdatedHandler(e.items[0],e.location);break;case t.CollectionEventKind.RESET:case t.CollectionEventKind.REFRESH:if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),a=n.length,s=0;a>s;s){var r=+n[s];this.freeRendererByIndex(r)}this.$dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},p.itemAddedHandler=function(t,e){for(var i=t.length,n=0;i>n;n++)this.itemAdded(t[n],e+n);this.resetRenderersIndices()},p.itemRemovedHandler=function(t,e){for(var i=t.length,n=i-1;n>=0;n--)this.itemRemoved(t[n],e+n);this.resetRenderersIndices()},p.itemAdded=function(t,e){if(this.$layout&&this.$layout.elementAdded(e),this.$layout&&this.$layout.$useVirtualLayout)return void this.$indexToRenderer.splice(e,0,null);var i=this.createVirtualRenderer(t);if(this.$indexToRenderer.splice(e,0,i),i){this.updateRenderer(i,e,t);var n=this.$DataGroup;n[4]&&(n[4]=!1,this.rendererAdded(i,e,t))}},p.itemRemoved=function(t,e){this.$layout&&this.$layout.elementRemoved(e);var i=this.$indexToRenderer[e];this.$indexToRenderer.length>e&&this.$indexToRenderer.splice(e,1),i&&(this.$layout&&this.$layout.$useVirtualLayout?this.doFreeRenderer(i):(this.rendererRemoved(i,e,t),this.removeChild(i)))},p.resetRenderersIndices=function(){var t=this.$indexToRenderer;if(0!=t.length)if(this.$layout&&this.$layout.$useVirtualLayout)for(var e=Object.keys(t),i=e.length,n=0;i>n;n++){var a=+e[n];this.resetRendererItemIndex(a)}else{var s=t.length;for(a=0;s>a;a++)this.resetRendererItemIndex(a)}},p.itemUpdatedHandler=function(t,e){if(!this.$DataGroup[11]){var i=this.$indexToRenderer[e];i&&this.updateRenderer(i,e,t)}},p.resetRendererItemIndex=function(t){var e=this.$indexToRenderer[t];e&&(e.itemIndex=t)},n(p,"itemRenderer",function(){return this.$DataGroup[6]},function(t){var e=this.$DataGroup;e[6]!=t&&(e[6]=t,e[5]=!0,e[8]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties())}),n(p,"itemRendererFunction",function(){return this.$DataGroup[7]},function(t){var e=this.$DataGroup;e[7]!=t&&(e[7]=t,e[5]=!0,e[8]=!0,this.removeDataProviderListener(),this.invalidateProperties())}),p.itemToRendererClass=function(e){var i,n=this.$DataGroup;return n[7]&&(i=n[7](e)),i||(i=n[6]),i||(i=t.ItemRenderer),i.$hashCode||(i.$hashCode=lark.$hashCount++),i},p.createChildren=function(){if(!this.$layout){var i=new t.VerticalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},p.commitProperties=function(){var i=this.$DataGroup;(i[5]||this.$dataProviderChanged||i[1])&&(this.removeAllRenderers(),this.$layout&&this.$layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),i[1]=!1,i[5]=!1,this.$dataProvider&&this.$dataProvider.on(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.$layout&&this.$layout.$useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.$dataProviderChanged&&(this.$dataProviderChanged=!1,this.scrollV=this.scrollH=0)),e.prototype.commitProperties.call(this),i[8]&&(i[8]=!1,this.$dataProvider&&this.$dataProvider.length>0&&(i[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize()))},p.measure=function(){this.$layout&&this.$layout.$useVirtualLayout&&this.ensureTypicalLayoutElement(),e.prototype.measure.call(this)},p.updateDisplayList=function(t,i){var n=this.$layout&&this.$layout.$useVirtualLayout;n&&this.ensureTypicalLayoutElement(),e.prototype.updateDisplayList.call(this,t,i);var a=this.$DataGroup;if(n){var s=a[9];if(s){var r=this.$indexToRenderer[0];if(r){var o=lark.$TempRectangle;r.getPreferredBounds(o),(o.width!=s.width||o.height!=s.height)&&(a[9]=null)}}}},p.ensureTypicalLayoutElement=function(){this.$DataGroup[9]||this.$dataProvider&&this.$dataProvider.length>0&&(this.$DataGroup[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())},p.measureRendererSize=function(){var t=this.$DataGroup;if(!t[12])return void this.setTypicalLayoutRect(null);var e=this.createVirtualRenderer(t[12]);if(!e)return void this.setTypicalLayoutRect(null);this.updateRenderer(e,0,t[12]),e.validateNow();var i=lark.$TempRectangle;e.getPreferredBounds(i);var n=new lark.Rectangle(0,0,i.width,i.height);this.$layout&&this.$layout.$useVirtualLayout?(t[4]&&this.rendererAdded(e,0,t[12]),this.doFreeRenderer(e)):this.removeChild(e),this.setTypicalLayoutRect(n),t[4]=!1},p.setTypicalLayoutRect=function(t){this.$DataGroup[9]=t,this.$layout&&(t?this.$layout.setTypicalSize(t.width,t.height):this.$layout.setTypicalSize(0,0))},p.removeAllRenderers=function(){for(var t=this.$indexToRenderer,e=Object.keys(t),i=e.length,n=0;i>n;n++){var a=e[n],s=t[a];s&&(this.rendererRemoved(s,s.itemIndex,s.data),this.removeChild(s))}this.$indexToRenderer=[];var r=this.$DataGroup;if(r[10]){for(var o=r[3],e=Object.keys(o),i=e.length,n=0;i>n;n++)for(var h=e[n],l=o[h],i=l.length,n=0;i>n;n++)s=l[n],this.rendererRemoved(s,s.itemIndex,s.data),this.removeChild(s);r[3]={},r[2]={},r[10]=!1}},p.createRenderers=function(){if(this.$dataProvider)for(var t=0,e=this.$dataProvider.length,i=0;e>i;i++){var n=this.$dataProvider.getItemAt(i),a=this.itemToRendererClass(n),s=this.createOneRenderer(a);s&&(this.$indexToRenderer[t]=s,this.updateRenderer(s,t,n),this.rendererAdded(s,t,n),t++)}},p.updateRenderer=function(t,e,i){var n=this.$DataGroup;return n[11]=!0,t.itemIndex=e,t.data=i,n[11]=!1,t},n(p,"numElements",function(){return this.$dataProvider?this.$dataProvider.length:0},void 0),p.rendererAdded=function(){},p.rendererRemoved=function(){},i}(t.Group);t.DataGroup=e,lark.registerClass(e,"swan.DataGroup"),t.registerProperty(e,"itemRenderer","Class"),t.registerProperty(e,"dataProvider","swan.ICollection",!0)}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;return p=i.prototype,p.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,a=this.$viewport;if(n&&a){var s=lark.$TempRectangle;n.getPreferredBounds(s);var r=s.width,o=s.y,h=a.scrollH,l=a.contentWidth,u=a.width;if(0>=h){var d=r*(1- -h/(.5*u));d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(d,0/0),n.setLayoutBoundsPosition(0,o)}else if(h>=l-u)d=r*(1-(h-l+u)/(.5*u)),d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(d,0/0),n.setLayoutBoundsPosition(e-d,o);else{var c=(e-r)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(c,o)}}},p.onPropertyChanged=function(t){switch(t.property){case"scrollH":case"contentWidth":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.HScrollBar=e,lark.registerClass(e,"swan.HScrollBar")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;return p=i.prototype,p.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,a=this.$viewport;if(n&&a){var s=lark.$TempRectangle;n.getPreferredBounds(s);var r=s.height,o=s.x,h=a.scrollV,l=a.contentHeight,u=a.height;if(0>=h){var d=r*(1- -h/(.5*u));d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(0/0,d),n.setLayoutBoundsPosition(o,0)}else if(h>=l-u)d=r*(1-(h-l+u)/(.5*u)),d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(0/0,d),n.setLayoutBoundsPosition(o,i-d);else{var c=(i-r)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(o,c)}}},p.onPropertyChanged=function(t){switch(t.property){case"scrollV":case"contentHeight":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.VScrollBar=e,lark.registerClass(e,"swan.VScrollBar")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.thumb=null,this.labelDisplay=null,this._labelFunction=null,this._slideDuration=500,this._direction=t.Direction.LTR,this.slideToValue=0,this.animationValue=0,this.animation=new t.sys.Animation(this.animationUpdateHandler,this)}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"labelFunction",function(){return this._labelFunction},function(t){this._labelFunction!=t&&(this._labelFunction=t,this.invalidateDisplayList())}),p.valueToLabel=function(t,e){return null!=this.labelFunction?this._labelFunction(t,e):t+" / "+e},n(p,"slideDuration",function(){return this._slideDuration},function(t){t=0|+t,this._slideDuration!==t&&(this._slideDuration=t,this.animation.isPlaying&&(this.animation.stop(),this.setValue(this.slideToValue)))}),n(p,"direction",function(){return this._direction},function(t){this._direction!=t&&(this._direction=t,this.invalidateDisplayList())}),p.$setValue=function(t){if(this.value!==t){var i=this.$Range;if(e.prototype.$setValue.call(this,t),this._slideDuration>0&&this.$stage){this.validateProperties();var n=this.animation;if(n.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),n.stop()),this.slideToValue=this.nearestValidValue(t,i[7]),this.slideToValue===this.animationValue)return;var a=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(i[0]-i[2]));n.duration=1/0===a?0:a,n.from=this.animationValue,n.to=this.slideToValue,n.play()}else this.animationValue=this.value}},p.animationUpdateHandler=function(t){var e=this.$Range,i=this.nearestValidValue(t.currentValue,e[7]);this.animationValue=Math.min(e[0],Math.max(e[2],i)),this.invalidateDisplayList()},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i===this.thumb&&this.thumb.on(lark.Event.RESIZE,this.onThumbResize,this)},p.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i===this.thumb&&this.thumb.removeListener(lark.Event.RESIZE,this.onThumbResize,this)},p.onThumbResize=function(){this.updateSkinDisplayList()},p.updateSkinDisplayList=function(){var e=this.animation.isPlaying?this.animationValue:this.value,i=this.maximum,n=this.thumb;if(n){var a=n.width,s=n.height,r=Math.round(e/i*a);(0>r||1/0===r)&&(r=0);var o=Math.round(e/i*s);(0>o||1/0===o)&&(o=0);var h=n.$scrollRect;h||(h=lark.$TempRectangle),h.setTo(0,0,a,s);var l=n.x-h.x,u=n.y-h.y;switch(this._direction){case t.Direction.LTR:h.width=r,n.x=l;break;case t.Direction.RTL:h.width=r,h.x=a-r,n.x=l+h.x;break;case t.Direction.TTB:h.height=o,n.y=u;break;case t.Direction.BTT:h.height=o,h.y=s-o,n.y=u+h.y}n.scrollRect=h}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(e,i))},i}(t.Range);t.ProgressBar=e,lark.registerClass(e,"swan.ProgressBar")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.trackHighlight=null,this.thumb=null,this.track=null,this.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:!0},this.maximum=10,this.on(lark.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"slideDuration",function(){return this.$SliderBase[6]},function(t){this.$SliderBase[6]=+t||0}),p.pointToValue=function(){return this.minimum},n(p,"liveDragging",function(){return this.$SliderBase[9]},function(t){this.$SliderBase[9]=!!t}),n(p,"pendingValue",function(){return this.$SliderBase[7]},function(t){t=+t||0;var e=this.$SliderBase;t!==e[7]&&(e[7]=t,this.invalidateDisplayList())}),p.setValue=function(t){this.$SliderBase[7]=t,e.prototype.setValue.call(this,t)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.thumb?(this.thumb.on(lark.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.on(lark.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track?(this.track.on(lark.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.on(lark.Event.RESIZE,this.onTrackOrThumbResize,this)):i===this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,lark.is(this.trackHighlight,"lark.DisplayObjectContainer")&&(this.trackHighlight.touchChildren=!1))},p.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.thumb?(this.thumb.removeListener(lark.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.removeListener(lark.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track&&(this.track.removeListener(lark.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.removeListener(lark.Event.RESIZE,this.onTrackOrThumbResize,this))},p.onTrackOrThumbResize=function(){this.updateSkinDisplayList()},p.onThumbTouchBegin=function(e){var i=this.$SliderBase;i[5]&&i[5].isPlaying&&this.stopAnimation();var n=this.$stage;n.on(lark.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),n.on(lark.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var a=this.thumb.globalToLocal(e.stageX,e.stageY,lark.$TempPoint);i[0]=a.x,i[1]=a.y,t.UIEvent.emitUIEvent(this,t.UIEvent.CHANGE_START)},p.onStageTouchMove=function(t){var e=this.$SliderBase;e[2]=t.$stageX,e[3]=t.$stageY;var i=this.track;if(i){var n=i.globalToLocal(e[2],e[3],lark.$TempPoint),a=this.pointToValue(n.x-e[0],n.y-e[1]);a=this.nearestValidValue(a,this.snapInterval),this.updateWhenTouchMove(a),t.updateAfterEvent()}},p.updateWhenTouchMove=function(t){t!=this.$SliderBase[7]&&(this.liveDragging?(this.setValue(t),this.emitWith(lark.Event.CHANGE)):this.pendingValue=t)},p.onStageTouchEnd=function(e){var i=e.$currentTarget;i.removeListener(lark.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),i.removeListener(lark.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),t.UIEvent.emitUIEvent(this,t.UIEvent.CHANGE_END);var n=this.$SliderBase;this.liveDragging||this.value==n[7]||(this.setValue(n[7]),this.emitWith(lark.Event.CHANGE))},p.onTouchBegin=function(t){this.$stage.on(lark.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),this.$SliderBase[4]=t.$target},p.stageTouchEndHandler=function(t){var e=t.$target,i=this.$SliderBase;t.$currentTarget.removeListener(lark.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),i[4]!=e&&this.contains(e)&&lark.TouchEvent.emitTouchEvent(this,lark.TouchEvent.TOUCH_TAP,!0,!0,t.$stageX,t.$stageY,t.touchPointID),i[4]=null},p.$animationUpdateHandler=function(t){this.pendingValue=t.currentValue},p.animationEndHandler=function(){this.setValue(this.$SliderBase[8]),this.emitWith(lark.Event.CHANGE),t.UIEvent.emitUIEvent(this,t.UIEvent.CHANGE_END)},p.stopAnimation=function(){this.$SliderBase[5].stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.emitWith(lark.Event.CHANGE),t.UIEvent.emitUIEvent(this,t.UIEvent.CHANGE_END)},p.onTrackTouchBegin=function(e){var i=this.thumb?this.thumb.width:0,n=this.thumb?this.thumb.height:0,a=e.$stageX-i/2,s=e.$stageY-n/2,r=this.track.globalToLocal(a,s,lark.$TempPoint),o=this.$Range,h=this.pointToValue(r.x,r.y);h=this.nearestValidValue(h,o[7]);var l=this.$SliderBase;if(h!=l[7])if(0!=l[6]){l[5]||(l[5]=new t.sys.Animation(this.$animationUpdateHandler,this),l[5].endFunction=this.animationEndHandler);var u=l[5];u.isPlaying&&this.stopAnimation(),l[8]=h,u.duration=l[6]*(Math.abs(l[7]-l[8])/(o[0]-o[2])),u.from=l[7],u.to=l[8],t.UIEvent.emitUIEvent(this,t.UIEvent.CHANGE_START),u.play()}else this.setValue(h),this.emitWith(lark.Event.CHANGE)},i}(t.Range);t.SliderBase=e,lark.registerClass(e,"swan.SliderBase")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.apply(this,arguments),this.$selected=!1,this.$autoSelected=!0}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"selected",function(){return this.$selected},function(t){this.$setSelected(t)}),p.$setSelected=function(e){e=!!e,e!==this.$selected&&(this.$selected=e,this.invalidateState(),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selected"))},p.getCurrentState=function(){var t=e.prototype.getCurrentState.call(this);if(this.$selected){var i=t+"AndSelected",n=this.skin;return n&&n.hasState(i)?i:"disabled"==t?"disabled":"down"}return t},p.buttonReleased=function(){this.$autoSelected&&(this.selected=!this.$selected,this.emitWith(lark.Event.CHANGE))},i}(t.Button);t.ToggleButton=e,lark.registerClass(e,"swan.ToggleButton"),t.registerBindable(e.prototype,"selected")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.$ListBase={0:!1,1:!1,2:-2,3:-1,4:!1,5:void 0,6:!1,7:null}}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"requireSelection",function(){return this.$ListBase[0]},function(t){t=!!t;var e=this.$ListBase;t!==e[0]&&(e[0]=t,t&&(e[1]=!0,this.invalidateProperties()))}),n(p,"selectedIndex",function(){return this.$getSelectedIndex()},function(t){t=0|+t,this.setSelectedIndex(t,!1)}),p.$getSelectedIndex=function(){var t=this.$ListBase;return t[2]!=i.NO_PROPOSED_SELECTION?t[2]:t[3]},p.setSelectedIndex=function(t,e){if(t!=this.selectedIndex){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[2]=t,this.invalidateProperties()}},n(p,"selectedItem",function(){var t=this.$ListBase;if(void 0!==t[5])return t[5];var e=this.$getSelectedIndex();return e==i.NO_SELECTION||null==this.$dataProvider?void 0:this.$dataProvider.length>e?this.$dataProvider.getItemAt(e):void 0},function(t){this.setSelectedItem(t,!1)}),p.setSelectedItem=function(t,e){if(void 0===e&&(e=!1),this.selectedItem!==t){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[5]=t,this.invalidateProperties()}},p.commitProperties=function(){var n=this.$dataProviderChanged;e.prototype.commitProperties.call(this);var a=this.$ListBase,s=this.$getSelectedIndex(),r=this.$dataProvider;n&&(s>=0&&r&&s<r.length?this.itemSelected(s,!0):this.requireSelection?a[2]=0:this.setSelectedIndex(-1,!1)),a[1]&&(a[1]=!1,a[0]&&s==i.NO_SELECTION&&r&&r.length>0&&(a[2]=0)),void 0!==a[5]&&(a[2]=r?r.getItemIndex(a[5]):i.NO_SELECTION,a[5]=void 0);var o=!1;a[2]!=i.NO_PROPOSED_SELECTION&&(o=this.commitSelection()),a[6]&&(a[6]=!1,o||t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},p.updateRenderer=function(t,i,n){return this.itemSelected(i,this.$isItemIndexSelected(i)),e.prototype.updateRenderer.call(this,t,i,n)},p.itemSelected=function(t,e){var i=this.$indexToRenderer[t];i&&(i.selected=e)},p.$isItemIndexSelected=function(t){return t==this.selectedIndex},p.commitSelection=function(e){void 0===e&&(e=!0);var n=this.$dataProvider,a=this.$ListBase,s=n?n.length-1:-1,r=a[3],o=a[2];if(o<i.NO_SELECTION&&(o=i.NO_SELECTION),o>s&&(o=s),a[0]&&o==i.NO_SELECTION&&n&&n.length>0)return a[2]=i.NO_PROPOSED_SELECTION,a[4]=!1,!1;if(a[4]){var h=this.emitWith(lark.Event.CHANGING,!1,!0);if(!h)return this.itemSelected(a[2],!1),a[2]=i.NO_PROPOSED_SELECTION,a[4]=!1,!1}return a[3]=o,a[2]=i.NO_PROPOSED_SELECTION,r!=i.NO_SELECTION&&this.itemSelected(r,!1),a[3]!=i.NO_SELECTION&&this.itemSelected(a[3],!0),e&&(a[4]&&(this.emitWith(lark.Event.CHANGE),a[4]=!1),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),!0},p.adjustSelection=function(t,e){void 0===e&&(e=!1);var n=this.$ListBase;n[2]!=i.NO_PROPOSED_SELECTION?n[2]=t:n[3]=t,n[6]=!0,this.invalidateProperties()},p.itemAdded=function(t,n){e.prototype.itemAdded.call(this,t,n);var a=this.$getSelectedIndex();a==i.NO_SELECTION?this.$ListBase[0]&&this.adjustSelection(n,!0):a>=n&&this.adjustSelection(a+1,!0)},p.itemRemoved=function(t,n){if(e.prototype.itemRemoved.call(this,t,n),this.selectedIndex!=i.NO_SELECTION){var a=this.$getSelectedIndex();n==a?this.requireSelection&&this.$dataProvider&&this.$dataProvider.length>0?0==n?(this.$ListBase[2]=0,this.invalidateProperties()):this.setSelectedIndex(0,!1):this.adjustSelection(-1,!1):a>n&&this.adjustSelection(a-1,!1)}},p.onCollectionChange=function(n){e.prototype.onCollectionChange.call(this,n),n.kind==t.CollectionEventKind.RESET?0==this.$dataProvider.length&&this.setSelectedIndex(i.NO_SELECTION,!1):n.kind==t.CollectionEventKind.REFRESH&&this.dataProviderRefreshed()},p.dataProviderRefreshed=function(){this.setSelectedIndex(i.NO_SELECTION,!1)},p.rendererAdded=function(t){t.on(lark.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.on(lark.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this)},p.rendererRemoved=function(t){t.removeListener(lark.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.removeListener(lark.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this)},p.onRendererTouchBegin=function(t){t.$isDefaultPrevented||(this.$ListBase[7]=t.$currentTarget,this.$stage.on(lark.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this))},p.onRendererTouchEnd=function(e){var i=e.$currentTarget,n=this.$ListBase[7];i==n&&(this.setSelectedIndex(i.itemIndex,!0),t.ItemTapEvent.emitItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,i))},p.stage_touchEndHandler=function(t){var e=t.$currentTarget;e.removeListener(lark.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this),this.$ListBase[7]=null},i.NO_SELECTION=-1,i.NO_PROPOSED_SELECTION=-2,i}(t.DataGroup);t.ListBase=e,lark.registerClass(e,"swan.ListBase"),t.registerBindable(e.prototype,"selectedIndex"),t.registerBindable(e.prototype,"selectedItem")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){var t=this;e.apply(this,arguments),this.allowMultipleSelection=!1,this._selectedIndices=[],this.isValidIndex=function(e){return t.$dataProvider&&e>=0&&e<t.$dataProvider.length&&e%1==0}}__extends(i,e);var n=__define,a=i;return p=a.prototype,n(p,"selectedIndices",function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},function(t){this.setSelectedIndices(t,!1)}),n(p,"selectedIndex",function(){return this._proposedSelectedIndices?this._proposedSelectedIndices.length>0?this._proposedSelectedIndices[0]:-1:this.$getSelectedIndex()},function(t){this.setSelectedIndex(t)}),n(p,"selectedItems",function(){var t=[],e=this.selectedIndices;if(e)for(var i=e.length,n=0;i>n;n++)t[n]=this.$dataProvider.getItemAt(e[n]);return t},function(t){var e=[];if(t)for(var i=t.length,n=0;i>n;n++){var a=this.$dataProvider.getItemIndex(t[n]);if(-1!=a&&e.splice(0,0,a),-1==a){e=[];break}}this.setSelectedIndices(e,!1)}),p.setSelectedIndices=function(t,e){var i=this.$ListBase;e&&(i[4]=i[4]||e),this._proposedSelectedIndices=t?t:[],this.invalidateProperties()},p.commitProperties=function(){e.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},p.commitSelection=function(i){void 0===i&&(i=!0);var n=this.$ListBase,a=n[3];if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&this._proposedSelectedIndices.length>0){var s=[];s.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=s}n[2]=this._proposedSelectedIndices.length>0?this._proposedSelectedIndices[0]:-1}var r=e.prototype.commitSelection.call(this,!1);if(!r)return this._proposedSelectedIndices=null,!1;var o=this.$getSelectedIndex();return o>t.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(o)&&this._proposedSelectedIndices.push(o):this._proposedSelectedIndices=[o]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(a)&&this.itemSelected(a,!0),this.commitMultipleSelection()),i&&r&&(n[4]&&(this.emitWith(lark.Event.CHANGE),n[4]=!1),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.emitPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),r},p.commitMultipleSelection=function(){var t,e,i=[],n=[],a=this._selectedIndices,s=this._proposedSelectedIndices;if(a.length>0&&s.length>0){for(e=s.length,t=0;e>t;t++)-1==a.indexOf(s[t])&&n.push(s[t]);for(e=a.length,t=0;e>t;t++)-1==s.indexOf(a[t])&&i.push(a[t])}else a.length>0?i=a:s.length>0&&(n=s);if(this._selectedIndices=s,i.length>0)for(e=i.length,t=0;e>t;t++)this.itemSelected(i[t],!1);if(n.length>0)for(e=n.length,t=0;e>t;t++)this.itemSelected(n[t],!0);this._proposedSelectedIndices=null},p.$isItemIndexSelected=function(t){return this.allowMultipleSelection?-1!=this._selectedIndices.indexOf(t):e.prototype.$isItemIndexSelected.call(this,t)},p.dataProviderRefreshed=function(){this.allowMultipleSelection||e.prototype.dataProviderRefreshed.call(this)},p.calculateSelectedIndices=function(t){var e=[],i=this._selectedIndices,n=i.length;if(n>0){if(1==n&&i[0]==t)return this.$ListBase[0]?(e.splice(0,0,i[0]),e):e;for(var a=!1,s=0;n>s;s++)i[s]==t?a=!0:i[s]!=t&&e.splice(0,0,i[s]);return a||e.splice(0,0,t),e}return e.splice(0,0,t),e},p.onRendererTouchEnd=function(i){if(this.allowMultipleSelection){var n=i.currentTarget,a=this.$ListBase[7];if(n!=a)return;this.setSelectedIndices(this.calculateSelectedIndices(n.itemIndex),!0),t.ItemTapEvent.emitItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)}else e.prototype.onRendererTouchEnd.call(this,i)},i}(t.ListBase);t.List=e,lark.registerClass(e,"swan.List")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=e;return p=i.prototype,p.pointToValue=function(t){if(!this.thumb||!this.track)return 0;var e=this.$Range,i=e[0]-e[2],n=this.getThumbRange();return e[2]+(0!=n?t/n*i:0)},p.getThumbRange=function(){var t=lark.$TempRectangle;this.track.getLayoutBounds(t);var e=t.width;return this.thumb.getLayoutBounds(t),e-t.width},p.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?(this.pendingValue-t[2])/i*e:0,a=this.track.localToGlobal(n,0,lark.$TempPoint),s=a.x,r=a.y,o=this.thumb.$parent.globalToLocal(s,r,lark.$TempPoint).x,h=lark.$TempRectangle;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(Math.round(o),h.y),this.trackHighlight&&this.trackHighlight.$parent){var l=this.trackHighlight.$parent.globalToLocal(s,r,lark.$TempPoint).x-n;this.trackHighlight.x=Math.round(l),this.trackHighlight.width=Math.round(n)}}},e}(t.SliderBase);t.HSlider=e,lark.registerClass(e,"swan.HSlider")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=e;return p=i.prototype,e}(t.ToggleButton);t.CheckBox=e,lark.registerClass(e,"swan.CheckBox")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=e;return p=i.prototype,e}(t.ToggleButton);t.ToggleSwitch=e,lark.registerClass(e,"swan.ToggleSwitch")}(swan||(swan={}));var swan;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=e;return p=i.prototype,p.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],a=this.getThumbRange();return i[2]+(0!=a?(a-e)/a*n:0)},p.getThumbRange=function(){var t=lark.$TempRectangle;this.track.getLayoutBounds(t);var e=t.height;return this.thumb.getLayoutBounds(t),e-t.height},p.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?e-(this.pendingValue-t[2])/i*e:0,a=this.track.localToGlobal(0,n,lark.$TempPoint),s=a.x,r=a.y,o=this.thumb.$parent.globalToLocal(s,r,lark.$TempPoint).y,h=lark.$TempRectangle,l=h.height;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(h.x,Math.round(o)),this.trackHighlight){var u=this.trackHighlight.$parent.globalToLocal(s,r,lark.$TempPoint).y;this.trackHighlight.y=Math.round(u+l),this.trackHighlight.height=Math.round(e-u)}}},e}(t.SliderBase);t.VSlider=e,lark.registerClass(e,"swan.VSlider")}(swan||(swan={}));var swan;!function(t){var e=function(e){function i(){e.call(this),this.indexBeingUpdated=!1,this.requireSelection=!0,this.useVirtualLayout=!1}__extends(i,e);var n=i;return p=n.prototype,p.createChildren=function(){if(!this.$layout){var i=new t.HorizontalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.JUSTIFY,i.verticalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},p.$setDataProvider=function(i){var n=this.$dataProvider;n&&n instanceof t.ViewStack&&(n.removeListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.removeListener(lark.Event.CHANGE,this.onIndexChanged,this)),i&&i instanceof t.ViewStack&&(i.on(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.on(lark.Event.CHANGE,this.onIndexChanged,this)),e.prototype.$setDataProvider.call(this,i)},p.onIndexChanged=function(){this.indexBeingUpdated=!0,this.$dataProvider.selectedIndex=this.selectedIndex,this.indexBeingUpdated=!1},p.onViewStackIndexChange=function(t){"selectedIndex"!=t.property||this.indexBeingUpdated||this.setSelectedIndex(this.$dataProvider.selectedIndex,!1)},i}(t.ListBase);t.TabBar=e,lark.registerClass(e,"swan.TabBar")}(swan||(swan={}));var swan;!function(t){var e={},i=function(i){function n(){i.call(this),this.$indexNumber=0,this.$radioButtonGroup=null,this._group=null,this.groupChanged=!1,this._groupName="radioGroup",this._value=null,this.groupName="radioGroup"}__extends(n,i);var a=__define,s=n;return p=s.prototype,a(p,"enabled",function(){return this.$Component[3]?!this.$radioButtonGroup||this.$radioButtonGroup.$enabled:!1},function(t){this.$setEnabled(t)}),a(p,"group",function(){if(!this._group&&this._groupName){var i=e[this._groupName];i||(i=new t.RadioButtonGroup,i.$name=this._groupName,e[this._groupName]=i),this._group=i}return this._group},function(t){this._group!=t&&(this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=t,this._groupName=t?this.group.$name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())}),a(p,"groupName",function(){return this._groupName},function(t){t&&""!=t&&(this._groupName=t,this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())}),p.$setSelected=function(t){i.prototype.$setSelected.call(this,t),this.invalidateDisplayList()},a(p,"value",function(){return this._value},function(e){this._value!=e&&(this._value=e,this.$selected&&this.group&&t.PropertyEvent.emitPropertyEvent(this.group,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"))}),p.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),i.prototype.commitProperties.call(this)
},p.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.group&&(this.$selected?this._group.$setSelection(this,!1):this.group.selection==this&&this._group.$setSelection(null,!1))},p.buttonReleased=function(){this.enabled&&!this.selected&&(this.$radioButtonGroup||this.addToGroup(),i.prototype.buttonReleased.call(this),this.group.$setSelection(this,!0))},p.addToGroup=function(){var t=this.group;return t&&t.$addInstance(this),t},n}(t.ToggleButton);t.RadioButton=i,lark.registerClass(i,"swan.RadioButton")}(swan||(swan={}));